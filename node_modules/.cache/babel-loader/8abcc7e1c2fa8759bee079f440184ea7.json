{"remainingRequest":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/babel-loader/lib/index.js!/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/eslint-loader/index.js??ref--13-0!/Users/mcsjourneys/Desktop/startup-frontend-main/src/store/modules/permission.js","dependencies":[{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/src/store/modules/permission.js","mtime":1655109659000},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/babel.config.js","mtime":1655109659000},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/cache-loader/dist/cjs.js","mtime":1715598879413},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/babel-loader/lib/index.js","mtime":1715598884187},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/eslint-loader/index.js","mtime":1715598884748}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0IHsgY29uc3RhbnRSb3V0ZXMsIHJvdXRlciB9IGZyb20gJ0Avcm91dGVyJzsKaW1wb3J0IHsgZ2V0VXNlclBlcm1pc3Npb24gfSBmcm9tICdAL2FwaS91c2VyJzsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwppbXBvcnQgTGF5b3V0IGZyb20gJ0AvbGF5b3V0L2luZGV4JzsKZXhwb3J0IHZhciBmaWx0ZXJBc3luY1JvdXRlciA9IGZ1bmN0aW9uIGZpbHRlckFzeW5jUm91dGVyKHJvdXRlcnMpIHsKICAvLyDpgY3ljoblkI7lj7DkvKDmnaXnmoTot6/nlLHlrZfnrKbkuLLvvIzovazmjaLkuLrnu4Tku7blr7nosaEKICByZXR1cm4gcm91dGVycy5maWx0ZXIoZnVuY3Rpb24gKHJvdXRlcikgewogICAgaWYgKHJvdXRlci5jb21wb25lbnQpIHsKICAgICAgaWYgKHJvdXRlci5jb21wb25lbnQgPT09ICdMYXlvdXQnKSB7CiAgICAgICAgLy8gTGF5b3V057uE5Lu254m55q6K5aSE55CGCiAgICAgICAgcm91dGVyLmNvbXBvbmVudCA9IExheW91dDsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgY29tcG9uZW50ID0gcm91dGVyLmNvbXBvbmVudDsKICAgICAgICByb3V0ZXIuY29tcG9uZW50ID0gbG9hZFZpZXcoY29tcG9uZW50KTsKICAgICAgfQogICAgfQogICAgcm91dGVyLm1ldGEgPSB7CiAgICAgIHRpdGxlOiByb3V0ZXIubmFtZSwKICAgICAgaWNvbjogcm91dGVyLmljb24sCiAgICAgIG5vQ2FjaGU6ICFyb3V0ZXIuY2FjaGUKICAgIH07CiAgICBpZiAocm91dGVyLmNoaWxkcmVuICYmIHJvdXRlci5jaGlsZHJlbi5sZW5ndGgpIHsKICAgICAgcm91dGVyLmNoaWxkcmVuID0gZmlsdGVyQXN5bmNSb3V0ZXIocm91dGVyLmNoaWxkcmVuKTsKICAgIH0KICAgIHJldHVybiB0cnVlOwogIH0pOwp9OwpleHBvcnQgdmFyIGxvYWRWaWV3ID0gZnVuY3Rpb24gbG9hZFZpZXcodmlldykgewogIHJldHVybiBmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgcmV0dXJuIHJlcXVpcmUoWyJAL3ZpZXdzLyIuY29uY2F0KHZpZXcpXSwgcmVzb2x2ZSk7CiAgfTsKfTsKdmFyIHN0YXRlID0gewogIHJvdXRlczogW10sCiAgYWRkUm91dGVzOiBbXSwKICBtZW51TG9hZGVkOiBmYWxzZQp9Owp2YXIgbXV0YXRpb25zID0gewogIFNFVF9ST1VURVM6IGZ1bmN0aW9uIFNFVF9ST1VURVMoc3RhdGUsIHJvdXRlcykgewogICAgc3RhdGUuYWRkUm91dGVzID0gcm91dGVzOwogICAgc3RhdGUucm91dGVzID0gY29uc3RhbnRSb3V0ZXMuY29uY2F0KHJvdXRlcyk7CiAgICAvLyDlop7liqDliqjmgIHot6/nlLEKICAgIHJvdXRlci5hZGRSb3V0ZXMocm91dGVzKTsKICB9LAogIFNFVF9NRU5VTE9BREVEOiBmdW5jdGlvbiBTRVRfTUVOVUxPQURFRChzdGF0ZSwgbWVudUxvYWRlZCkgewogICAgc3RhdGUubWVudUxvYWRlZCA9IG1lbnVMb2FkZWQ7CiAgICAvLyBjb25zb2xlLmxvZygnbWVudUxvYWRlZCcsIHN0YXRlLm1lbnVMb2FkZWQpCiAgfQp9Owp2YXIgYWN0aW9ucyA9IHsKICBnZW5lcmF0ZVJvdXRlczogZnVuY3Rpb24gZ2VuZXJhdGVSb3V0ZXMoX3JlZikgewogICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgIHZhciBhY2Nlc3NlZFJvdXRlczsKICAgICAgZ2V0VXNlclBlcm1pc3Npb24oc3RvcmUuZ2V0dGVycy51c2VyLmlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBhY2Nlc3NlZFJvdXRlcyA9IEFycmF5VG9UcmVlRGF0YShyZXMpOwogICAgICAgIHZhciBhc3luY1JvdXRlciA9IFtdOwogICAgICAgIGlmIChhY2Nlc3NlZFJvdXRlcyAmJiBhY2Nlc3NlZFJvdXRlcy5sZW5ndGgpIHsKICAgICAgICAgIGFzeW5jUm91dGVyID0gZmlsdGVyQXN5bmNSb3V0ZXIoYWNjZXNzZWRSb3V0ZXMpOwogICAgICAgIH0KICAgICAgICBhc3luY1JvdXRlci5wdXNoKHsKICAgICAgICAgIHBhdGg6ICcqJywKICAgICAgICAgIHJlZGlyZWN0OiAnLzQwNCcsCiAgICAgICAgICBoaWRkZW46IHRydWUKICAgICAgICB9KTsKICAgICAgICBjb21taXQoJ1NFVF9ST1VURVMnLCBhc3luY1JvdXRlcik7CiAgICAgICAgY29tbWl0KCdTRVRfTUVOVUxPQURFRCcsIHRydWUpOwogICAgICAgIHJlc29sdmUoYXN5bmNSb3V0ZXIpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgc2V0TWVudUxvYWRlZDogZnVuY3Rpb24gc2V0TWVudUxvYWRlZChfcmVmMiwgbXVudUxvYWRlZCkgewogICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdDsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICBjb21taXQoJ1NFVF9NRU5VTE9BREVEJywgbXVudUxvYWRlZCk7CiAgICB9KTsKICB9Cn07CmZ1bmN0aW9uIEFycmF5VG9UcmVlRGF0YShkYXRhKSB7CiAgdmFyIGNsb25lRGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZGF0YSkpOyAvLyDlr7nmupDmlbDmja7mt7HluqblhYvpmoYKICByZXR1cm4gY2xvbmVEYXRhLmZpbHRlcihmdW5jdGlvbiAoZmF0aGVyKSB7CiAgICB2YXIgYnJhbmNoQXJyID0gY2xvbmVEYXRhLmZpbHRlcihmdW5jdGlvbiAoY2hpbGQpIHsKICAgICAgcmV0dXJuIGZhdGhlci5pZCA9PT0gY2hpbGQucGlkOwogICAgfSk7IC8vIOi/lOWbnuavj+S4gOmhueeahOWtkOe6p+aVsOe7hAogICAgYnJhbmNoQXJyLmxlbmd0aCA+IDAgPyBmYXRoZXIuY2hpbGRyZW4gPSBicmFuY2hBcnIgOiAnJzsgLy8g5aaC5p6c5a2Y5Zyo5a2Q57qn77yM5YiZ57uZ54i257qn5re75Yqg5LiA5LiqY2hpbGRyZW7lsZ7mgKfvvIzlubbotYvlgLwKICAgIHJldHVybiBmYXRoZXIucGlkID09PSBudWxsOyAvLyDov5Tlm57nrKzkuIDlsYIKICB9KTsKfQpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogc3RhdGUsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMsCiAgYWN0aW9uczogYWN0aW9ucwp9Ow=="},{"version":3,"names":["constantRoutes","router","getUserPermission","store","Layout","filterAsyncRouter","routers","filter","component","loadView","meta","title","name","icon","noCache","cache","children","length","view","resolve","require","concat","state","routes","addRoutes","menuLoaded","mutations","SET_ROUTES","SET_MENULOADED","actions","generateRoutes","_ref","commit","Promise","accessedRoutes","getters","user","id","then","res","ArrayToTreeData","asyncRouter","push","path","redirect","hidden","setMenuLoaded","_ref2","munuLoaded","data","cloneData","JSON","parse","stringify","father","branchArr","child","pid","namespaced"],"sources":["/Users/mcsjourneys/Desktop/startup-frontend-main/src/store/modules/permission.js"],"sourcesContent":["import { constantRoutes, router } from '@/router'\nimport { getUserPermission } from '@/api/user'\nimport store from '@/store'\nimport Layout from '@/layout/index'\n\nexport const filterAsyncRouter = (routers) => { // 遍历后台传来的路由字符串，转换为组件对象\n  return routers.filter(router => {\n    if (router.component) {\n      if (router.component === 'Layout') { // Layout组件特殊处理\n        router.component = Layout\n      } else {\n        const component = router.component\n        router.component = loadView(component)\n      }\n    }\n    router.meta = { title: router.name, icon: router.icon, noCache: !router.cache }\n    if (router.children && router.children.length) {\n      router.children = filterAsyncRouter(router.children)\n    }\n    return true\n  })\n}\n\nexport const loadView = (view) => {\n  return (resolve) => require([`@/views/${view}`], resolve)\n}\n\nconst state = {\n  routes: [],\n  addRoutes: [],\n  menuLoaded: false\n}\n\nconst mutations = {\n  SET_ROUTES: (state, routes) => {\n    state.addRoutes = routes\n    state.routes = constantRoutes.concat(routes)\n    // 增加动态路由\n    router.addRoutes(routes)\n  },\n  SET_MENULOADED: (state, menuLoaded) => {\n    state.menuLoaded = menuLoaded\n    // console.log('menuLoaded', state.menuLoaded)\n  }\n}\n\nconst actions = {\n  generateRoutes({ commit }) {\n    return new Promise(resolve => {\n      let accessedRoutes\n      getUserPermission(store.getters.user.id).then(res => {\n        accessedRoutes = ArrayToTreeData(res)\n        let asyncRouter = []\n        if (accessedRoutes && accessedRoutes.length) {\n          asyncRouter = filterAsyncRouter(accessedRoutes)\n        }\n        asyncRouter.push({ path: '*', redirect: '/404', hidden: true })\n        commit('SET_ROUTES', asyncRouter)\n        commit('SET_MENULOADED', true)\n        resolve(asyncRouter)\n      })\n    })\n  },\n\n  setMenuLoaded({ commit }, munuLoaded) {\n    return new Promise(resolve => {\n      commit('SET_MENULOADED', munuLoaded)\n    })\n  }\n}\n\nfunction ArrayToTreeData(data) {\n  const cloneData = JSON.parse(JSON.stringify(data)) // 对源数据深度克隆\n  return cloneData.filter(father => {\n    const branchArr = cloneData.filter(child => father.id === child.pid) // 返回每一项的子级数组\n    branchArr.length > 0 ? father.children = branchArr : '' // 如果存在子级，则给父级添加一个children属性，并赋值\n    return father.pid === null // 返回第一层\n  })\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n}\n"],"mappings":"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","ignoreList":[]}]}