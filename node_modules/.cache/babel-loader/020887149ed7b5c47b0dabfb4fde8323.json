{"remainingRequest":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/babel-loader/lib/index.js!/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/eslint-loader/index.js??ref--13-0!/Users/mcsjourneys/Desktop/startup-frontend-main/src/store/modules/user.js","dependencies":[{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/src/store/modules/user.js","mtime":1655109659000},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/babel.config.js","mtime":1655109659000},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/cache-loader/dist/cjs.js","mtime":1715598879413},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/babel-loader/lib/index.js","mtime":1715598884187},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/eslint-loader/index.js","mtime":1715598884748}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyI7CmltcG9ydCB7IGxvZ2luIGFzIF9sb2dpbiwgbG9nb3V0IGFzIF9sb2dvdXQsIGdldEluZm8gYXMgX2dldEluZm8gfSBmcm9tICdAL2FwaS91c2VyJzsKaW1wb3J0IHsgZ2V0VG9rZW4sIHNldFRva2VuLCByZW1vdmVUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7CmltcG9ydCB7IHJlc2V0Um91dGVyIH0gZnJvbSAnQC9yb3V0ZXInOwppbXBvcnQgeyBlbmNyeXB0IH0gZnJvbSAnQC91dGlscy9yc2FFbmNyeXB0JzsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwp2YXIgdXNlciA9IHsKICBzdGF0ZTogewogICAgdG9rZW46IGdldFRva2VuKCksCiAgICB1c2VyOiB7fSwKICAgIHJvbGVzOiBbXQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBTRVRfVE9LRU46IGZ1bmN0aW9uIFNFVF9UT0tFTihzdGF0ZSwgdG9rZW4pIHsKICAgICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICAgIH0sCiAgICBTRVRfTkFNRTogZnVuY3Rpb24gU0VUX05BTUUoc3RhdGUsIG5hbWUpIHsKICAgICAgc3RhdGUubmFtZSA9IG5hbWU7CiAgICB9LAogICAgU0VUX0FWQVRBUjogZnVuY3Rpb24gU0VUX0FWQVRBUihzdGF0ZSwgYXZhdGFyKSB7CiAgICAgIHN0YXRlLmF2YXRhciA9IGF2YXRhcjsKICAgIH0sCiAgICBTRVRfVVNFUjogZnVuY3Rpb24gU0VUX1VTRVIoc3RhdGUsIHVzZXIpIHsKICAgICAgc3RhdGUudXNlciA9IHVzZXI7CiAgICB9LAogICAgU0VUX1JPTEVTOiBmdW5jdGlvbiBTRVRfUk9MRVMoc3RhdGUsIHJvbGVzKSB7CiAgICAgIHN0YXRlLnJvbGVzID0gcm9sZXM7CiAgICB9LAogICAgUkVTRVRfU1RBVEU6IGZ1bmN0aW9uIFJFU0VUX1NUQVRFKHN0YXRlKSB7CiAgICAgIGZvciAodmFyIGkgaW4gc3RhdGUpIHsKICAgICAgICBkZWxldGUgc3RhdGVbaV07CiAgICAgIH0KICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIC8vIHVzZXIgbG9naW4KICAgIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmLCB1c2VySW5mbykgewogICAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICAgIHZhciB1c2VyTmFtZSA9IHVzZXJJbmZvLnVzZXJOYW1lLAogICAgICAgIHBhc3N3b3JkID0gdXNlckluZm8ucGFzc3dvcmQ7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgX2xvZ2luKHsKICAgICAgICAgIHVzZXJOYW1lOiB1c2VyTmFtZS50cmltKCksCiAgICAgICAgICBwYXNzd29yZDogZW5jcnlwdChwYXNzd29yZCkKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgY29uc29sZS5sb2coJ3Jlc3BvbnNlJywgcmVzcG9uc2UpOwogICAgICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCByZXNwb25zZS50b2tlbik7CiAgICAgICAgICBzZXRVc2VySW5mbyhyZXNwb25zZS51c2VyLCBjb21taXQpOwogICAgICAgICAgc2V0VG9rZW4ocmVzcG9uc2UudG9rZW4pOwogICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLy8gZ2V0IHVzZXIgaW5mbwogICAgZ2V0SW5mbzogZnVuY3Rpb24gZ2V0SW5mbyhfcmVmMikgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0OwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIF9nZXRJbmZvKCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIHZhciB1c2VyID0gcmVzcG9uc2UudXNlciwKICAgICAgICAgICAgcm9sZXMgPSByZXNwb25zZS5yb2xlczsKICAgICAgICAgIGlmICghdXNlcikgewogICAgICAgICAgICByZWplY3QoJ+iOt+WPlueUqOaIt+S/oeaBr+mUmeivry4nKTsKICAgICAgICAgIH0KICAgICAgICAgIGNvbW1pdCgnU0VUX1VTRVInLCB1c2VyKTsKICAgICAgICAgIGNvbW1pdCgnU0VUX1JPTEVTJywgcm9sZXMpOwogICAgICAgICAgcmVzb2x2ZSh1c2VyKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIHVzZXIgbG9nb3V0CiAgICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChfcmVmMykgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjMuc3RhdGU7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgX2xvZ291dCgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgcmVtb3ZlVG9rZW4oKTsgLy8gbXVzdCByZW1vdmUgIHRva2VuICBmaXJzdAogICAgICAgICAgcmVzZXRSb3V0ZXIoKTsKICAgICAgICAgIGNvbW1pdCgnUkVTRVRfU1RBVEUnKTsKICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCdwZXJtaXNzaW9uL3NldE1lbnVMb2FkZWQnLCBmYWxzZSk7CiAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvLyByZW1vdmUgdG9rZW4KICAgIHJlc2V0VG9rZW46IGZ1bmN0aW9uIHJlc2V0VG9rZW4oX3JlZjQpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWY0LmNvbW1pdDsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgcmVtb3ZlVG9rZW4oKTsgLy8gbXVzdCByZW1vdmUgIHRva2VuICBmaXJzdAogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSk7CiAgICB9CiAgfQp9OwpleHBvcnQgdmFyIHNldFVzZXJJbmZvID0gZnVuY3Rpb24gc2V0VXNlckluZm8ocmVzLCBjb21taXQpIHsKICBjb21taXQoJ1NFVF9VU0VSJywgcmVzLnVzZXIpOwogIGNvbW1pdCgnU0VUX1JPTEVTJywgcmVzLnJvbGVzKTsKfTsKZXhwb3J0IGRlZmF1bHQgdXNlcjs="},{"version":3,"names":["login","logout","getInfo","getToken","setToken","removeToken","resetRouter","encrypt","store","user","state","token","roles","mutations","SET_TOKEN","SET_NAME","name","SET_AVATAR","avatar","SET_USER","SET_ROLES","RESET_STATE","i","actions","_ref","userInfo","commit","userName","password","Promise","resolve","reject","trim","then","response","console","log","setUserInfo","catch","error","_ref2","_ref3","dispatch","resetToken","_ref4","res"],"sources":["/Users/mcsjourneys/Desktop/startup-frontend-main/src/store/modules/user.js"],"sourcesContent":["import { login, logout, getInfo } from '@/api/user'\nimport { getToken, setToken, removeToken } from '@/utils/auth'\nimport { resetRouter } from '@/router'\nimport { encrypt } from '@/utils/rsaEncrypt'\nimport store from '@/store'\n\nconst user = {\n  state: {\n    token: getToken(),\n    user: {},\n    roles: []\n  },\n\n  mutations: {\n    SET_TOKEN: (state, token) => {\n      state.token = token\n    },\n    SET_NAME: (state, name) => {\n      state.name = name\n    },\n    SET_AVATAR: (state, avatar) => {\n      state.avatar = avatar\n    },\n    SET_USER: (state, user) => {\n      state.user = user\n    },\n    SET_ROLES: (state, roles) => {\n      state.roles = roles\n    },\n    RESET_STATE(state) {\n      for (const i in state) {\n        delete state[i]\n      }\n    }\n\n  },\n\n  actions: {\n  // user login\n    login({ commit }, userInfo) {\n      const { userName, password } = userInfo\n      return new Promise((resolve, reject) => {\n        login({ userName: userName.trim(), password: encrypt(password) }).then(response => {\n          console.log('response', response)\n          commit('SET_TOKEN', response.token)\n          setUserInfo(response.user, commit)\n          setToken(response.token)\n          resolve()\n        }).catch(error => {\n          reject(error)\n        })\n      })\n    },\n\n    // get user info\n    getInfo({ commit }) {\n      return new Promise((resolve, reject) => {\n        getInfo().then(response => {\n          const { user, roles } = response\n          if (!user) {\n            reject('获取用户信息错误.')\n          }\n          commit('SET_USER', user)\n          commit('SET_ROLES', roles)\n          resolve(user)\n        }).catch(error => {\n          console.log(error)\n          reject(error)\n        })\n      })\n    },\n\n    // user logout\n    logout({ commit, state }) {\n      return new Promise((resolve, reject) => {\n        logout().then(() => {\n          removeToken() // must remove  token  first\n          resetRouter()\n          commit('RESET_STATE')\n          store.dispatch('permission/setMenuLoaded', false)\n          resolve()\n        }).catch(error => {\n          reject(error)\n        })\n      })\n    },\n\n    // remove token\n    resetToken({ commit }) {\n      return new Promise(resolve => {\n        removeToken() // must remove  token  first\n        resolve()\n      })\n    }\n  }\n}\nexport const setUserInfo = (res, commit) => {\n  commit('SET_USER', res.user)\n  commit('SET_ROLES', res.roles)\n}\n\nexport default user\n"],"mappings":"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","ignoreList":[]}]}