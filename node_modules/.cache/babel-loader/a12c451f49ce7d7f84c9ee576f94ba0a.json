{"remainingRequest":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/babel-loader/lib/index.js!/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mcsjourneys/Desktop/startup-frontend-main/src/views/role/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/src/views/role/index.vue","mtime":1655109659000},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/babel.config.js","mtime":1655109659000},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/cache-loader/dist/cjs.js","mtime":1715598879413},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/babel-loader/lib/index.js","mtime":1715598884187},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/cache-loader/dist/cjs.js","mtime":1715598879413},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/vue-loader/lib/index.js","mtime":1715598879453}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHBhcnNlVGltZSB9IGZyb20gJ0AvdXRpbHMvaW5kZXgnOwppbXBvcnQgeyBnZXRSb2xlTGlzdCwgZ2V0Um9sZSwgc2F2ZVJvbGUsIGRlbGV0ZVJvbGUsIGdldFBlcm1pc3Npb24sIHNhdmVQZXJtaXNzaW9uIH0gZnJvbSAnQC9hcGkvcm9sZSc7CmltcG9ydCB7IGdldE1lbnVMaXN0IH0gZnJvbSAnQC9hcGkvbWVudSc7CmltcG9ydCBUcmVlc2VsZWN0IGZyb20gJ0ByaW9waGFlL3Z1ZS10cmVlc2VsZWN0JzsKaW1wb3J0ICdAcmlvcGhhZS92dWUtdHJlZXNlbGVjdC9kaXN0L3Z1ZS10cmVlc2VsZWN0LmNzcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAn6KeS6Imy566h55CGJywKICBjb21wb25lbnRzOiB7CiAgICBUcmVlc2VsZWN0OiBUcmVlc2VsZWN0CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd0RpYWxvZzogZmFsc2UsCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBjYXJkVHlwZTogdHJ1ZSwKICAgICAgZm9ybUxvYWRpbmc6IHRydWUsCiAgICAgIGZvcm06IHt9LAogICAgICByb2xlczogW10sCiAgICAgIHJvbGVOYW1lOiAnJywKICAgICAgY3JlYXRlVGltZTogbnVsbCwKICAgICAgcnVsZXM6IHsKICAgICAgICByb2xlQ29kZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeinkuiJsue8lueggScsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICByb2xlTmFtZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeinkuiJsuWQjeensCcsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XQogICAgICB9LAogICAgICBzaG93UGVybWlzc2lvbkRpYWxvZzogZmFsc2UsCiAgICAgIHBlcm1pc3Npb246IHt9LAogICAgICBtZW51VHJlZTogW10sCiAgICAgIHZhbHVlQ29uc2lzdHNPZjogJ0FMTF9XSVRIX0lOREVURVJNSU5BVEUnLAogICAgICBzb3J0VmFsdWVCeTogJ0lOREVYJwogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7fSwKICBtZXRob2RzOiB7CiAgICBwYXJzZVRpbWU6IHBhcnNlVGltZSwKICAgIGRvUXVlcnk6IGZ1bmN0aW9uIGRvUXVlcnkoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBwYXJhbSA9IHsKICAgICAgICByb2xlTmFtZTogdGhpcy5yb2xlTmFtZQogICAgICB9OwogICAgICBpZiAodGhpcy5jcmVhdGVUaW1lICE9IG51bGwpIHsKICAgICAgICBwYXJhbS5jcmVhdGVUaW1lU3RhcnQgPSBEYXRlLnBhcnNlKHRoaXMuY3JlYXRlVGltZVswXSk7CiAgICAgICAgcGFyYW0uY3JlYXRlVGltZUVuZCA9IERhdGUucGFyc2UodGhpcy5jcmVhdGVUaW1lWzFdKTsKICAgICAgfQogICAgICBnZXRSb2xlTGlzdChwYXJhbSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcykgewogICAgICAgICAgX3RoaXMucm9sZXMgPSByZXM7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBkb0FkZDogZnVuY3Rpb24gZG9BZGQoKSB7CiAgICAgIHRoaXMuc2hvd0RpYWxvZyA9IHRydWU7CiAgICAgIHRoaXMuZm9ybUxvYWRpbmcgPSBmYWxzZTsKICAgICAgdGhpcy5mb3JtID0ge307CiAgICB9LAogICAgZG9FZGl0OiBmdW5jdGlvbiBkb0VkaXQoaWQpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHRoaXMuc2hvd0RpYWxvZyA9IHRydWU7CiAgICAgIGdldFJvbGUoaWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMpIHsKICAgICAgICAgIF90aGlzMi5mb3JtID0gcmVzOwogICAgICAgICAgX3RoaXMyLmZvcm1Mb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBkb0NhbmNlbDogZnVuY3Rpb24gZG9DYW5jZWwoKSB7CiAgICAgIHRoaXMuc2hvd0RpYWxvZyA9IGZhbHNlOwogICAgICB0aGlzLmZvcm1Mb2FkaW5nID0gdHJ1ZTsKICAgICAgdGhpcy5mb3JtID0ge307CiAgICB9LAogICAgZG9TdWJtaXQ6IGZ1bmN0aW9uIGRvU3VibWl0KHJvbGUpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIHRoaXMuJHJlZnMuZm9ybS52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIF90aGlzMy5mb3JtTG9hZGluZyA9IHRydWU7CiAgICAgICAgICBzYXZlUm9sZShyb2xlKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgaWYgKHJlcykgewogICAgICAgICAgICAgIF90aGlzMy5zaG93RGlhbG9nID0gZmFsc2U7CiAgICAgICAgICAgICAgX3RoaXMzLiRub3RpZnkoewogICAgICAgICAgICAgICAgdGl0bGU6ICfkv53lrZjmiJDlip8nLAogICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgZHVyYXRpb246IDI1MDAKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBfdGhpczMuZG9RdWVyeSgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzMy5mb3JtTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBkb0RlbGV0ZTogZnVuY3Rpb24gZG9EZWxldGUoaWQpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIHRoaXMuJGNvbmZpcm0oIlx1Nzg2RVx1OEJBNFx1NTIyMFx1OTY2NFx1NkI2NFx1Njc2MVx1NjU3MFx1NjM2RT8iLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIGRlbGV0ZVJvbGUoW2lkXSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBpZiAocmVzKSB7CiAgICAgICAgICAgIF90aGlzNC4kbm90aWZ5KHsKICAgICAgICAgICAgICB0aXRsZTogJ+WIoOmZpOaIkOWKnycsCiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgIGR1cmF0aW9uOiAyNTAwCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBfdGhpczQuZG9RdWVyeSgpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7fSk7CiAgICB9LAogICAgZG9CZWZvcmVDbG9zZTogZnVuY3Rpb24gZG9CZWZvcmVDbG9zZSgpIHsKICAgICAgdGhpcy5zaG93RGlhbG9nID0gdHJ1ZTsKICAgIH0sCiAgICBkb0Fzc2lnblBlbWlzc2lvbjogZnVuY3Rpb24gZG9Bc3NpZ25QZW1pc3Npb24ocm9sZUlkLCByb2xlTmFtZSkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKICAgICAgdmFyIHBhcmFtID0gewogICAgICAgIG5hbWU6ICcnCiAgICAgIH07CiAgICAgIGdldE1lbnVMaXN0KHBhcmFtKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzKSB7CiAgICAgICAgICBfdGhpczUubWVudVRyZWUgPSBfdGhpczUuQXJyYXlUb1RyZWVEYXRhKHJlcyk7CiAgICAgICAgICBnZXRQZXJtaXNzaW9uKHJvbGVJZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIGlmIChyZXMpIHsKICAgICAgICAgICAgICB2YXIgbWVudXMgPSBbXTsKICAgICAgICAgICAgICByZXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICAgICAgbWVudXMucHVzaChlbGVtZW50Lm1lbnVJZCk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgX3RoaXM1LnBlcm1pc3Npb24gPSB7CiAgICAgICAgICAgICAgICByb2xlSWQ6IHJvbGVJZCwKICAgICAgICAgICAgICAgIHJvbGVOYW1lOiByb2xlTmFtZSwKICAgICAgICAgICAgICAgIG1lbnVzOiBtZW51cwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgX3RoaXM1LnNob3dQZXJtaXNzaW9uRGlhbG9nID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBkb1BlbWlzc2lvbkNhbmNlbDogZnVuY3Rpb24gZG9QZW1pc3Npb25DYW5jZWwoKSB7CiAgICAgIHRoaXMuc2hvd1Blcm1pc3Npb25EaWFsb2cgPSBmYWxzZTsKICAgICAgdGhpcy5wZXJtaXNzaW9uID0ge307CiAgICB9LAogICAgZG9TdWJtaXRQZW1pc3Npb246IGZ1bmN0aW9uIGRvU3VibWl0UGVtaXNzaW9uKHBlcm1pc3Npb24pIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CiAgICAgIGNvbnNvbGUubG9nKHBlcm1pc3Npb24pOwogICAgICBzYXZlUGVybWlzc2lvbihwZXJtaXNzaW9uLnJvbGVJZCwgcGVybWlzc2lvbi5tZW51cykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcykgewogICAgICAgICAgX3RoaXM2LnNob3dQZXJtaXNzaW9uRGlhbG9nID0gZmFsc2U7CiAgICAgICAgICBfdGhpczYuJG5vdGlmeSh7CiAgICAgICAgICAgIHRpdGxlOiAn6YWN572u5p2D6ZmQ5oiQ5YqfJywKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBkdXJhdGlvbjogMjUwMAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBBcnJheVRvVHJlZURhdGE6IGZ1bmN0aW9uIEFycmF5VG9UcmVlRGF0YShkYXRhKSB7CiAgICAgIHZhciBjbG9uZURhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGRhdGEpKTsgLy8g5a+55rqQ5pWw5o2u5rex5bqm5YWL6ZqGCiAgICAgIHJldHVybiBjbG9uZURhdGEuZmlsdGVyKGZ1bmN0aW9uIChmYXRoZXIpIHsKICAgICAgICB2YXIgYnJhbmNoQXJyID0gY2xvbmVEYXRhLmZpbHRlcihmdW5jdGlvbiAoY2hpbGQpIHsKICAgICAgICAgIHJldHVybiBmYXRoZXIuaWQgPT09IGNoaWxkLnBpZDsKICAgICAgICB9KTsgLy8g6L+U5Zue5q+P5LiA6aG555qE5a2Q57qn5pWw57uECiAgICAgICAgYnJhbmNoQXJyLmxlbmd0aCA+IDAgPyBmYXRoZXIuY2hpbGRyZW4gPSBicmFuY2hBcnIgOiAnJzsgLy8g5aaC5p6c5a2Y5Zyo5a2Q57qn77yM5YiZ57uZ54i257qn5re75Yqg5LiA5LiqY2hpbGRyZW7lsZ7mgKfvvIzlubbotYvlgLwKICAgICAgICB2YXIgcGFyZW50QXJyID0gY2xvbmVEYXRhLmZpbHRlcihmdW5jdGlvbiAocGFyZW50KSB7CiAgICAgICAgICByZXR1cm4gcGFyZW50LmlkID09PSBmYXRoZXIucGlkOwogICAgICAgIH0pOyAvLyDliKTmlq3or6Xoj5zljZXnmoTniLbnuqfoj5zljZXmmK/lkKblrZjlnKgKICAgICAgICBpZiAocGFyZW50QXJyLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgcmV0dXJuIGZhdGhlcjsKICAgICAgICB9IC8vIOWmguaenOivpeiPnOWNleeahOeItue6p+iPnOWNleS4jeWtmOWcqO+8jOWImeebtOaOpei/lOWbnuivpeiPnOWNlQogICAgICAgIHJldHVybiBmYXRoZXIucGlkID09PSBudWxsOyAvLyDov5Tlm57nrKzkuIDlsYIKICAgICAgfSk7CiAgICB9LAogICAgdG9nZ2xlOiBmdW5jdGlvbiB0b2dnbGUoKSB7CiAgICAgIHRoaXMuY2FyZFR5cGUgPSAhdGhpcy5jYXJkVHlwZTsKICAgIH0KICB9Cn07"},{"version":3,"names":["parseTime","getRoleList","getRole","saveRole","deleteRole","getPermission","savePermission","getMenuList","Treeselect","name","components","data","showDialog","loading","cardType","formLoading","form","roles","roleName","createTime","rules","roleCode","required","message","trigger","showPermissionDialog","permission","menuTree","valueConsistsOf","sortValueBy","created","methods","doQuery","_this","param","createTimeStart","Date","parse","createTimeEnd","then","res","doAdd","doEdit","id","_this2","doCancel","doSubmit","role","_this3","$refs","validate","valid","$notify","title","type","duration","catch","doDelete","_this4","$confirm","confirmButtonText","cancelButtonText","doBeforeClose","doAssignPemission","roleId","_this5","ArrayToTreeData","menus","forEach","element","push","menuId","doPemissionCancel","doSubmitPemission","_this6","console","log","cloneData","JSON","stringify","filter","father","branchArr","child","pid","length","children","parentArr","parent","toggle"],"sources":["src/views/role/index.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <!--工具栏-->\n    <div class=\"head-container\">\n      <!-- 搜索 -->\n      <el-input\n        v-model=\"roleName\"\n        size=\"small\"\n        clearable\n        placeholder=\"输入角色名称搜索\"\n        style=\"width: 200px\"\n        class=\"filter-item\"\n        @keyup.enter.native=\"doQuery\"\n      />\n      <el-date-picker\n        v-model=\"createTime\"\n        :default-time=\"['00:00:00', '23:59:59']\"\n        type=\"daterange\"\n        range-separator=\":\"\n        size=\"small\"\n        class=\"date-item\"\n        value-format=\"yyyy-MM-dd HH:mm:ss\"\n        start-placeholder=\"开始日期\"\n        end-placeholder=\"结束日期\"\n      />\n      <el-button\n        class=\"filter-item\"\n        size=\"mini\"\n        type=\"success\"\n        icon=\"el-icon-search\"\n        @click=\"doQuery\"\n      >搜索</el-button>\n      <el-button\n        class=\"filter-item\"\n        size=\"mini\"\n        type=\"primary\"\n        icon=\"el-icon-circle-plus-outline\"\n        @click=\"doAdd\"\n      >新增</el-button>\n      <el-button-group class=\"card-toggle-table\">\n        <el-tooltip\n          v-if=\"cardType\"\n          class=\"item\"\n          effect=\"dark\"\n          content=\"切换成表格\"\n          placement=\"top-start\"\n        >\n          <el-button size=\"mini\" plain icon=\"el-icon-s-grid\" @click=\"toggle\" />\n        </el-tooltip>\n        <el-tooltip\n          v-else\n          class=\"item\"\n          effect=\"dark\"\n          content=\"切换成卡片\"\n          placement=\"top-start\"\n        >\n          <el-button\n            size=\"mini\"\n            plain\n            icon=\"el-icon-bank-card\"\n            @click=\"toggle\"\n          />\n        </el-tooltip>\n      </el-button-group>\n    </div>\n    <!-- 表单渲染 -->\n    <el-dialog\n      append-to-body\n      :close-on-click-modal=\"false\"\n      :before-close=\"doBeforeClose\"\n      :visible.sync=\"showDialog\"\n      width=\"520px\"\n    >\n      <el-form\n        ref=\"form\"\n        :inline=\"true\"\n        :model=\"form\"\n        :rules=\"rules\"\n        size=\"small\"\n        label-width=\"80px\"\n      >\n        <el-form-item label=\"角色编码\" prop=\"roleCode\">\n          <el-input v-model=\"form.roleCode\" style=\"width: 380px\" />\n        </el-form-item>\n        <el-form-item label=\"角色名称\" prop=\"roleName\">\n          <el-input v-model=\"form.roleName\" style=\"width: 380px\" />\n        </el-form-item>\n        <el-form-item label=\"描述信息\" prop=\"description\">\n          <el-input\n            v-model=\"form.description\"\n            style=\"width: 380px\"\n            rows=\"5\"\n            type=\"textarea\"\n          />\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"text\" @click=\"doCancel\">取消</el-button>\n        <el-button\n          :loading=\"formLoading\"\n          type=\"primary\"\n          @click=\"doSubmit(form)\"\n        >确认</el-button>\n      </div>\n    </el-dialog>\n    <!-- 卡片风格 -->\n    <el-row v-if=\"cardType\">\n      <el-col\n        v-for=\"item in roles\"\n        :key=\"item.id\"\n        :span=\"5\"\n        style=\"margin-bottom: 10px\"\n        :offset=\"1\"\n      >\n        <el-card>\n          <div slot=\"header\" class=\"clearfix\">\n            <i class=\"el-icon-user\" /><span style=\"margin-left: 5px\">{{\n              item.roleName\n            }}</span>\n            <div\n              style=\"display: inline-block; float: right; cursor: pointer\"\n              @click=\"doEdit(item.id)\"\n            >\n              <el-tooltip effect=\"dark\" content=\"编辑角色\" placement=\"top\">\n                <i class=\"el-icon-edit-outline\" style=\"margin-left: 15px\" />\n              </el-tooltip>\n            </div>\n          </div>\n          <div>\n            <ul class=\"role-info\">\n              <li>\n                <div class=\"role-left\">描述信息：{{ item.description }}</div>\n              </li>\n              <li>\n                <div class=\"role-left\">\n                  创建时间：{{ parseTime(item.createTime) }}\n                </div>\n              </li>\n            </ul>\n          </div>\n          <div\n            style=\"display: inline-block; float: left; cursor: pointer\"\n            @click=\"doAssignPemission(item.id, item.roleName)\"\n          >\n            <el-tooltip effect=\"dark\" content=\"权限分配\" placement=\"bottom\">\n              <i class=\"el-icon-menu\" />\n            </el-tooltip>\n          </div>\n          <div\n            style=\"display: inline-block; float: right; cursor: pointer\"\n            @click=\"doDelete(item.id)\"\n          >\n            <el-tooltip effect=\"dark\" content=\"删除角色\" placement=\"bottom\">\n              <i class=\"el-icon-delete\" style=\"margin-left: 15px\" />\n            </el-tooltip>\n          </div>\n        </el-card>\n      </el-col>\n    </el-row>\n\n    <!-- 列表风格 -->\n    <el-table\n      v-else\n      ref=\"table\"\n      :data=\"roles\"\n      style=\"width: 100%; font-size: 12px\"\n      @selection-change=\"selectionChangeHandler\"\n    >\n      <el-table-column\n        :show-overflow-tooltip=\"true\"\n        width=\"150\"\n        prop=\"roleName\"\n        label=\"角色名称\"\n      />\n\n      <el-table-column\n        :show-overflow-tooltip=\"true\"\n        prop=\"createTime\"\n        width=\"155\"\n        label=\"创建时间\"\n      >\n        <template slot-scope=\"scope\">\n          <span>{{ parseTime(scope.row.createTime) }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"description\" label=\"描述信息\" />\n      <el-table-column label=\"操作\" width=\"300\" align=\"center\" fixed=\"right\">\n        <template slot-scope=\"scope\">\n          <el-button\n            size=\"mini\"\n            type=\"text\"\n            round\n            @click=\"doEdit(scope.row.id)\"\n          >编辑角色</el-button>\n          <el-button\n            size=\"mini\"\n            type=\"text\"\n            round\n            @click=\"doDelete(scope.row.id)\"\n          >删除角色</el-button>\n          <el-button\n            size=\"mini\"\n            type=\"text\"\n            round\n            @click=\"doAssignPemission(scope.row.id,scope.row.roleName)\"\n          >分配权限</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <!-- 分配权限表单 -->\n    <el-dialog\n      append-to-body\n      :close-on-click-modal=\"false\"\n      :visible.sync=\"showPermissionDialog\"\n      :title=\"permission.roleName\"\n      width=\"520px\"\n    >\n      <treeselect\n        v-model=\"permission.menus\"\n        :options=\"menuTree\"\n        :show-count=\"true\"\n        style=\"width: 480px\"\n        :multiple=\"true\"\n        :sort-value-by=\"sortValueBy\"\n        :value-consists-of=\"valueConsistsOf\"\n        :default-expand-level=\"1\"\n        placeholder=\"请选择或搜索菜单进行权限分配\"\n      />\n\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"text\" @click=\"doPemissionCancel\">取消</el-button>\n        <el-button\n          type=\"primary\"\n          @click=\"doSubmitPemission(permission)\"\n        >确认</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { parseTime } from '@/utils/index'\nimport { getRoleList, getRole, saveRole, deleteRole, getPermission, savePermission } from '@/api/role'\nimport { getMenuList } from '@/api/menu'\nimport Treeselect from '@riophae/vue-treeselect'\nimport '@riophae/vue-treeselect/dist/vue-treeselect.css'\nexport default {\n  name: '角色管理',\n  components: { Treeselect },\n  data() {\n    return {\n      showDialog: false,\n      loading: false,\n      cardType: true,\n      formLoading: true,\n      form: {},\n      roles: [],\n      roleName: '',\n      createTime: null,\n      rules: {\n        roleCode: [\n          { required: true, message: '请输入角色编码', trigger: 'blur' }\n        ],\n        roleName: [\n          { required: true, message: '请输入角色名称', trigger: 'blur' }\n        ]\n      },\n      showPermissionDialog: false,\n      permission: {},\n      menuTree: [],\n      valueConsistsOf: 'ALL_WITH_INDETERMINATE',\n      sortValueBy: 'INDEX'\n    }\n  },\n  created() {\n\n  },\n  methods: {\n    parseTime,\n    doQuery() {\n      var param = { roleName: this.roleName }\n      if (this.createTime != null) {\n        param.createTimeStart = Date.parse(this.createTime[0])\n        param.createTimeEnd = Date.parse(this.createTime[1])\n      }\n      getRoleList(param).then(res => {\n        if (res) {\n          this.roles = res\n        }\n      })\n    },\n    doAdd() {\n      this.showDialog = true\n      this.formLoading = false\n      this.form = {}\n    },\n    doEdit(id) {\n      this.showDialog = true\n      getRole(id).then(res => {\n        if (res) {\n          this.form = res\n          this.formLoading = false\n        }\n      })\n    },\n    doCancel() {\n      this.showDialog = false\n      this.formLoading = true\n      this.form = {}\n    },\n    doSubmit(role) {\n      this.$refs.form.validate(valid => {\n        if (valid) {\n          this.formLoading = true\n          saveRole(role).then(res => {\n            if (res) {\n              this.showDialog = false\n              this.$notify({\n                title: '保存成功',\n                type: 'success',\n                duration: 2500\n              })\n              this.doQuery()\n            }\n          }).catch(() => {\n            this.formLoading = false\n          })\n        }\n      })\n    },\n    doDelete(id) {\n      this.$confirm(`确认删除此条数据?`, '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() =>\n        deleteRole([id]).then(res => {\n          if (res) {\n            this.$notify({\n              title: '删除成功',\n              type: 'success',\n              duration: 2500\n            })\n            this.doQuery()\n          }\n        })\n      ).catch(() => {\n      })\n    },\n    doBeforeClose() {\n      this.showDialog = true\n    },\n    doAssignPemission(roleId, roleName) {\n      var param = { name: '' }\n      getMenuList(param).then(res => {\n        if (res) {\n          this.menuTree = this.ArrayToTreeData(res)\n          getPermission(roleId).then(res => {\n            if (res) {\n              const menus = []\n              res.forEach(element => {\n                menus.push(element.menuId)\n              })\n              this.permission = { roleId: roleId, roleName: roleName, menus: menus }\n              this.showPermissionDialog = true\n            }\n          })\n        }\n      })\n    },\n    doPemissionCancel() {\n      this.showPermissionDialog = false\n      this.permission = {}\n    },\n    doSubmitPemission(permission) {\n      console.log(permission)\n      savePermission(permission.roleId, permission.menus).then(res => {\n        if (res) {\n          this.showPermissionDialog = false\n          this.$notify({\n            title: '配置权限成功',\n            type: 'success',\n            duration: 2500\n          })\n        }\n      })\n    },\n    ArrayToTreeData(data) {\n      const cloneData = JSON.parse(JSON.stringify(data)) // 对源数据深度克隆\n      return cloneData.filter(father => {\n        const branchArr = cloneData.filter(child => father.id === child.pid) // 返回每一项的子级数组\n        branchArr.length > 0 ? father.children = branchArr : '' // 如果存在子级，则给父级添加一个children属性，并赋值\n        const parentArr = cloneData.filter(parent => parent.id === father.pid) // 判断该菜单的父级菜单是否存在\n        if (parentArr.length === 0) { return father } // 如果该菜单的父级菜单不存在，则直接返回该菜单\n        return father.pid === null // 返回第一层\n      })\n    },\n    toggle() {\n      this.cardType = !this.cardType\n    }\n\n  }\n}\n\n</script>\n\n<style rel=\"stylesheet/scss\" lang=\"scss\">\n.role-span {\n  font-weight: bold;\n  color: #303133;\n  font-size: 15px;\n}\n.role-info {\n  margin-top: 0;\n  padding-top: 0;\n  padding-left: 0;\n  list-style: none;\n  li {\n    border-bottom: 1px solid #f0f3f4;\n    padding: 11px 0;\n    font-size: 12px;\n  }\n  .role-left {\n    color: rgb(148, 137, 137);\n    overflow: hidden;\n    white-space: nowrap;\n    text-align: left;\n    text-overflow: ellipsis;\n  }\n\n  .line {\n    width: 100%;\n    height: 1px;\n    border-top: 1px solid #ccc;\n  }\n}\n\n.card-toggle-table {\n  padding: 4px 0;\n  display: -webkit-flex;\n  display: flex;\n  float: right;\n  align-items: center;\n  margin-left: auto;\n}\n</style>\n\n<style rel=\"stylesheet/scss\" lang=\"scss\" scoped>\n::v-deep .el-input-number .el-input__inner {\n  text-align: left;\n}\n::v-deep .vue-treeselect__multi-value {\n  margin-bottom: 0;\n}\n::v-deep .vue-treeselect__multi-value-item {\n  border: 0;\n  padding: 0;\n}\n</style>\n"],"mappings":"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","ignoreList":[]}]}