{"remainingRequest":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mcsjourneys/Desktop/startup-frontend-main/src/views/menu/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/src/views/menu/index.vue","mtime":1655109659000},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/cache-loader/dist/cjs.js","mtime":1715598879413},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/babel-loader/lib/index.js","mtime":1715598884187},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/cache-loader/dist/cjs.js","mtime":1715598879413},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/vue-loader/lib/index.js","mtime":1715598879453}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBTZWxlY3RJY29uIGZyb20gJ0AvY29tcG9uZW50cy9TZWxlY3RJY29uJwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCcKaW1wb3J0IHsgcGFyc2VUaW1lIH0gZnJvbSAnQC91dGlscy9pbmRleCcKaW1wb3J0IHsgZ2V0TWVudUxpc3QsIGdldE1lbnVCeUlkLCBzYXZlTWVudSwgZGVsZXRlTWVudSB9IGZyb20gJ0AvYXBpL21lbnUnCmltcG9ydCBUcmVlc2VsZWN0IGZyb20gJ0ByaW9waGFlL3Z1ZS10cmVlc2VsZWN0JwppbXBvcnQgJ0ByaW9waGFlL3Z1ZS10cmVlc2VsZWN0L2Rpc3QvdnVlLXRyZWVzZWxlY3QuY3NzJwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ+iPnOWNleeuoeeQhicsCiAgY29tcG9uZW50czogeyBTZWxlY3RJY29uLCBUcmVlc2VsZWN0IH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFjdGl2ZU5hbWU6ICdtZW51TGlzdCcsCiAgICAgIHNob3dEaWFsb2c6IGZhbHNlLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgZm9ybUxvYWRpbmc6IGZhbHNlLAogICAgICBmb3JtOiB7fSwKICAgICAgbWVudXM6IFtdLAogICAgICBtZW51VHJlZTogW10sCiAgICAgIHNlbGVjdGlvbnM6IFtdLAogICAgICBuYW1lOiAnJywKICAgICAgY3JlYXRlVGltZTogbnVsbCwKICAgICAgcnVsZXM6IHsKICAgICAgICBuYW1lOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl6I+c5Y2V5ZCN56ewJywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICBdLAogICAgICAgIHBhdGg6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXot6/nlLHlnLDlnYAnLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgIF0sCiAgICAgICAgY29tcG9uZW50OiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl57uE5Lu26Lev5b6EJywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICBdCiAgICAgIH0KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKFsKICAgICAgJ2Jhc2VBcGknCiAgICBdKQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHZhciBwYXJhbSA9IHsgbmFtZTogJycgfQogICAgZ2V0TWVudUxpc3QocGFyYW0pLnRoZW4ocmVzID0+IHsKICAgICAgaWYgKHJlcykgewogICAgICAgIHRoaXMubWVudVRyZWUgPSB0aGlzLkFycmF5VG9UcmVlRGF0YShyZXMpCiAgICAgIH0KICAgIH0pCiAgfSwKICBtZXRob2RzOiB7CiAgICBwYXJzZVRpbWUsCiAgICBkb1F1ZXJ5KCkgewogICAgICB0aGlzLm1lbnVzID0gW10KICAgICAgdmFyIHBhcmFtID0geyBuYW1lOiB0aGlzLm5hbWUgfQogICAgICBpZiAodGhpcy5jcmVhdGVUaW1lICE9IG51bGwpIHsKICAgICAgICBwYXJhbS5jcmVhdGVUaW1lU3RhcnQgPSBEYXRlLnBhcnNlKHRoaXMuY3JlYXRlVGltZVswXSkKICAgICAgICBwYXJhbS5jcmVhdGVUaW1lRW5kID0gRGF0ZS5wYXJzZSh0aGlzLmNyZWF0ZVRpbWVbMV0pCiAgICAgIH0KICAgICAgZ2V0TWVudUxpc3QocGFyYW0pLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzKSB7CiAgICAgICAgICB0aGlzLm1lbnVzID0gcmVzCiAgICAgICAgICB0aGlzLm1lbnVUcmVlID0gdGhpcy5BcnJheVRvVHJlZURhdGEocmVzKQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICBkb0FkZCgpIHsKICAgICAgdGhpcy5mb3JtID0geyBpY29uOiAnJyB9CiAgICAgIHRoaXMuc2hvd0RpYWxvZyA9IHRydWUKICAgICAgdGhpcy5mb3JtTG9hZGluZyA9IGZhbHNlCiAgICB9LAogICAgZG9TdWJtaXQobWVudSkgewogICAgICB0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgLy8g5Yik5pat6I+c5Y2VaWTkuI7niLboj5zljZVpZOaYr+WQpuS4gOagtwogICAgICAgICAgaWYgKG1lbnUucGlkID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgbWVudS5waWQgPSBudWxsCiAgICAgICAgICB9CiAgICAgICAgICBpZiAobWVudS5pZCAmJiBtZW51LmlkID09PSBtZW51LnBpZCkgewogICAgICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICAgIHRpdGxlOiAn5LiK57qn6I+c5Y2V5LiN6IO95piv6Ieq5bexJywKICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLAogICAgICAgICAgICAgIGR1cmF0aW9uOiAyNTAwCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIHJldHVybgogICAgICAgICAgfQogICAgICAgICAgLy8gY29uc29sZS5sb2cobWVudSkKICAgICAgICAgIHRoaXMuZm9ybUxvYWRpbmcgPSB0cnVlCiAgICAgICAgICBzYXZlTWVudShtZW51KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIGlmIChyZXMpIHsKICAgICAgICAgICAgICB0aGlzLnNob3dEaWFsb2cgPSBmYWxzZQogICAgICAgICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICAgICAgICB0aXRsZTogJ+S/neWtmOaIkOWKnycsCiAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjUwMAogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgdGhpcy5kb1F1ZXJ5KCkKICAgICAgICAgICAgfQogICAgICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgICAgICB0aGlzLmZvcm1Mb2FkaW5nID0gZmFsc2UKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIGRvRGVsZXRlKCkgewogICAgICBjb25zdCBpZHMgPSBbXQogICAgICB0aGlzLnNlbGVjdGlvbnMuZm9yRWFjaCgocmVzKSA9PiB7CiAgICAgICAgaWRzLnB1c2gocmVzLmlkKQogICAgICB9KQogICAgICB0aGlzLiRjb25maXJtKGDnoa7orqTliKDpmaTov5nkupvoj5zljZXlkJc/YCwgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oKCkgPT4KICAgICAgICBkZWxldGVNZW51KGlkcykudGhlbihyZXMgPT4gewogICAgICAgICAgaWYgKHJlcykgewogICAgICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICAgIHRpdGxlOiAn5Yig6Zmk5oiQ5YqfJywKICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgZHVyYXRpb246IDI1MDAKICAgICAgICAgICAgfSkKICAgICAgICAgICAgdGhpcy5kb1F1ZXJ5KCkKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICApLmNhdGNoKCgpID0+IHsKICAgICAgfSkKICAgIH0sCiAgICAvLyDpgInmi6nmlLnlj5gKICAgIHNlbGVjdGlvbkNoYW5nZUhhbmRsZXIodmFsKSB7CiAgICAgIHRoaXMuc2VsZWN0aW9ucyA9IHZhbAogICAgfSwKICAgIC8vIOmAieaLqeaJgOaciQogICAgc2VsZWN0QWxsQ2hhbmdlKHNlbGVjdGlvbikgewogICAgICAvLyDlpoLmnpzpgInkuK3nmoTmlbDnm67kuI7or7fmsYLliLDnmoTmlbDnm67nm7jlkIzlsLHpgInkuK3lrZDoioLngrnvvIzlkKbliJnlsLHmuIXnqbrpgInkuK0KICAgICAgaWYgKHNlbGVjdGlvbiAmJiBzZWxlY3Rpb24ubGVuZ3RoID09PSB0aGlzLm1lbnVUcmVlLmxlbmd0aCkgewogICAgICAgIHNlbGVjdGlvbi5mb3JFYWNoKHZhbCA9PiB7CiAgICAgICAgICB0aGlzLnNlbGVjdENoYW5nZShzZWxlY3Rpb24sIHZhbCkKICAgICAgICB9KQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHJlZnMudGFibGUuY2xlYXJTZWxlY3Rpb24oKQogICAgICB9CiAgICB9LAogICAgLy8g5Y2V5Liq6YCJ5LitCiAgICBzZWxlY3RDaGFuZ2Uoc2VsZWN0aW9uLCByb3cpIHsKICAgICAgLy8g5aaC5p6cc2VsZWN0aW9u5Lit5a2Y5Zyocm935Luj6KGo5piv6YCJ5Lit77yM5ZCm5YiZ5piv5Y+W5raI6YCJ5LitCiAgICAgIGlmIChzZWxlY3Rpb24uZmluZCh2YWwgPT4geyByZXR1cm4gdmFsLmlkID09PSByb3cuaWQgfSkpIHsKICAgICAgICBpZiAocm93LmNoaWxkcmVuKSB7CiAgICAgICAgICByb3cuY2hpbGRyZW4uZm9yRWFjaCh2YWwgPT4gewogICAgICAgICAgICB0aGlzLiRyZWZzLnRhYmxlLnRvZ2dsZVJvd1NlbGVjdGlvbih2YWwsIHRydWUpCgogICAgICAgICAgICAvLyDov4fmu6Tph43lpI3lgLwKICAgICAgICAgICAgbGV0IGkgPSAwCiAgICAgICAgICAgIGxldCBleGlzdCA9IGZhbHNlCiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBzZWxlY3Rpb24ubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBpZiAoc2VsZWN0aW9uW2ldLmlkID09PSB2YWwuaWQpIHsKICAgICAgICAgICAgICAgIGV4aXN0ID0gdHJ1ZQogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCFleGlzdCkgewogICAgICAgICAgICAgIHNlbGVjdGlvbi5wdXNoKHZhbCkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHZhbC5jaGlsZHJlbikgewogICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2hhbmdlKHNlbGVjdGlvbiwgdmFsKQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnRvZ2dsZVJvd1NlbGVjdGlvbihzZWxlY3Rpb24sIHJvdykKICAgICAgfQogICAgfSwKICAgIC8vIOWPlua2iOmAieS4rQogICAgdG9nZ2xlUm93U2VsZWN0aW9uKHNlbGVjdGlvbiwgZGF0YSkgewogICAgICBpZiAoZGF0YS5jaGlsZHJlbikgewogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgIGRhdGEuY2hpbGRyZW4uZm9yRWFjaCh2YWwgPT4gewogICAgICAgICAgICB0aGlzLiRyZWZzLnRhYmxlLnRvZ2dsZVJvd1NlbGVjdGlvbih2YWwsIGZhbHNlKQogICAgICAgICAgICBpZiAodmFsLmNoaWxkcmVuKSB7CiAgICAgICAgICAgICAgdGhpcy50b2dnbGVSb3dTZWxlY3Rpb24oc2VsZWN0aW9uLCB2YWwpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgICAgfQogICAgfSwKCiAgICBkb0VkaXQoaWQpIHsKICAgICAgdGhpcy5zaG93RGlhbG9nID0gdHJ1ZQogICAgICB0aGlzLmZvcm1Mb2FkaW5nID0gdHJ1ZQogICAgICB0aGlzLmZvcm0gPSB7fQogICAgICBnZXRNZW51QnlJZChpZCkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuZm9ybSA9IHJlcwogICAgICAgIHRoaXMuZm9ybUxvYWRpbmcgPSBmYWxzZQogICAgICB9KQogICAgfSwKICAgIGRvQ2FuY2VsKCkgewogICAgICB0aGlzLnNob3dEaWFsb2cgPSBmYWxzZQogICAgICB0aGlzLmZvcm1Mb2FkaW5nID0gdHJ1ZQogICAgICB0aGlzLmZvcm0gPSB7fQogICAgfSwKICAgIEFycmF5VG9UcmVlRGF0YShkYXRhKSB7CiAgICAgIGNvbnN0IGNsb25lRGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZGF0YSkpIC8vIOWvuea6kOaVsOaNrua3seW6puWFi+mahgogICAgICByZXR1cm4gY2xvbmVEYXRhLmZpbHRlcihmYXRoZXIgPT4gewogICAgICAgIGNvbnN0IGJyYW5jaEFyciA9IGNsb25lRGF0YS5maWx0ZXIoY2hpbGQgPT4gZmF0aGVyLmlkID09PSBjaGlsZC5waWQpIC8vIOi/lOWbnuavj+S4gOmhueeahOWtkOe6p+aVsOe7hAogICAgICAgIGJyYW5jaEFyci5sZW5ndGggPiAwID8gZmF0aGVyLmNoaWxkcmVuID0gYnJhbmNoQXJyIDogJycgLy8g5aaC5p6c5a2Y5Zyo5a2Q57qn77yM5YiZ57uZ54i257qn5re75Yqg5LiA5LiqY2hpbGRyZW7lsZ7mgKfvvIzlubbotYvlgLwKICAgICAgICBjb25zdCBwYXJlbnRBcnIgPSBjbG9uZURhdGEuZmlsdGVyKHBhcmVudCA9PiBwYXJlbnQuaWQgPT09IGZhdGhlci5waWQpIC8vIOWIpOaWreivpeiPnOWNleeahOeItue6p+iPnOWNleaYr+WQpuWtmOWcqAogICAgICAgIGlmIChwYXJlbnRBcnIubGVuZ3RoID09PSAwKSB7IHJldHVybiBmYXRoZXIgfSAvLyDlpoLmnpzor6Xoj5zljZXnmoTniLbnuqfoj5zljZXkuI3lrZjlnKjvvIzliJnnm7TmjqXov5Tlm57or6Xoj5zljZUKICAgICAgICByZXR1cm4gZmF0aGVyLnBpZCA9PT0gbnVsbCAvLyDov5Tlm57nrKzkuIDlsYIKICAgICAgfSkKICAgIH0sCiAgICAvLyDpgInkuK3lm77moIcKICAgIHNlbGVjdGVkKG5hbWUpIHsKICAgICAgdGhpcy5mb3JtLmljb24gPSBuYW1lCiAgICB9CiAgfQp9Cgo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/menu","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <!--工具栏-->\n    <div class=\"head-container\">\n      <!-- 搜索 -->\n      <el-input\n        v-model=\"name\"\n        size=\"small\"\n        clearable\n        placeholder=\"输入菜单名称搜索\"\n        style=\"width: 200px\"\n        class=\"filter-item\"\n        @keyup.enter.native=\"doQuery\"\n      />\n      <el-date-picker\n        v-model=\"createTime\"\n        :default-time=\"['00:00:00', '23:59:59']\"\n        type=\"daterange\"\n        range-separator=\":\"\n        size=\"small\"\n        class=\"date-item\"\n        value-format=\"yyyy-MM-dd HH:mm:ss\"\n        start-placeholder=\"开始日期\"\n        end-placeholder=\"结束日期\"\n      />\n      <el-button\n        class=\"filter-item\"\n        size=\"mini\"\n        type=\"success\"\n        icon=\"el-icon-search\"\n        @click=\"doQuery\"\n      >搜索</el-button>\n      <el-button\n        class=\"filter-item\"\n        size=\"mini\"\n        type=\"primary\"\n        icon=\"el-icon-document-add\"\n        @click=\"doAdd\"\n      >增加</el-button>\n      <el-button\n        class=\"filter-item\"\n        size=\"mini\"\n        type=\"danger\"\n        icon=\"el-icon-circle-plus-outline\"\n        :disabled=\"selections.length === 0\"\n        @click=\"doDelete\"\n      >删除{{ selections.length }}</el-button>\n    </div>\n\n    <el-row>\n      <!-- 表单渲染 -->\n      <el-dialog\n        append-to-body\n        :close-on-click-modal=\"false\"\n        :visible.sync=\"showDialog\"\n        width=\"620px\"\n      >\n        <el-form\n          ref=\"form\"\n          :inline=\"true\"\n          :model=\"form\"\n          :rules=\"rules\"\n          size=\"small\"\n          label-width=\"80px\"\n        >\n          <el-form-item label=\"菜单名称\" prop=\"name\">\n            <el-input v-model=\"form.name\" />\n          </el-form-item>\n          <el-form-item label=\"路由地址\" prop=\"path\">\n            <el-input\n              v-model=\"form.path\"\n              placeholder=\"根目录菜单需前置加斜杠/\"\n            />\n          </el-form-item>\n          <el-form-item label=\"组件路径\" prop=\"component\">\n            <el-input\n              v-model=\"form.component\"\n              placeholder=\"根目录菜单输入Layout\"\n            />\n          </el-form-item>\n          <el-form-item label=\"菜单排序\" prop=\"sort\">\n            <el-input-number\n              v-model.number=\"form.sort\"\n              :min=\"0\"\n              :max=\"999\"\n              controls-position=\"right\"\n              style=\"width: 185px\"\n            />\n          </el-form-item>\n          <el-form-item label=\"菜单图标\">\n            <el-popover\n              placement=\"bottom-start\"\n              width=\"450\"\n              trigger=\"click\"\n              @show=\"$refs['iconSelect'].reset()\"\n            >\n              <el-input\n                slot=\"reference\"\n                v-model=\"form.icon\"\n                placeholder=\"请选择菜单图标\"\n                readonly\n                style=\"cursor: pointer; width: 460px\"\n              >\n                <template slot=\"prepend\">\n                  <i\n                    v-if=\"form.icon && form.icon.includes('el-icon')\"\n                    :class=\"form.icon\"\n                  />\n                  <svg-icon v-else :icon-class=\"form.icon ? form.icon : ''\" />\n                </template>\n              </el-input>\n              <select-icon ref=\"iconSelect\" @selected=\"selected\" />\n            </el-popover>\n          </el-form-item>\n          <el-form-item label=\"上级菜单\" prop=\"pid\">\n            <treeselect\n              v-model=\"form.pid\"\n              :options=\"menuTree\"\n              :show-count=\"true\"\n              style=\"width: 460px\"\n              placeholder=\"选择上级菜单\"\n            />\n          </el-form-item>\n        </el-form>\n        <div slot=\"footer\" class=\"dialog-footer\">\n          <el-button type=\"text\" @click=\"doCancel\">取消</el-button>\n          <el-button\n            :loading=\"formLoading\"\n            type=\"primary\"\n            @click=\"doSubmit(form)\"\n          >确认</el-button>\n        </div>\n      </el-dialog>\n      <el-tabs v-model=\"activeName\" type=\"border-card\">\n        <el-tab-pane label=\"菜单列表\" name=\"menuList\">\n          <el-table\n            ref=\"table\"\n            v-loading=\"loading\"\n            :data=\"menuTree\"\n            row-key=\"id\"\n            :tree-props=\"{ children: 'children', hasChildren: 'hasChildren' }\"\n            style=\"width: 100%; font-size: 12px\"\n            @selection-change=\"selectionChangeHandler\"\n            @select=\"selectChange\"\n            @select-all=\"selectAllChange\"\n          >\n            <el-table-column type=\"selection\" width=\"55\" />\n            <el-table-column\n              :show-overflow-tooltip=\"true\"\n              width=\"150\"\n              prop=\"name\"\n              label=\"菜单名称\"\n            />\n            <el-table-column\n              :show-overflow-tooltip=\"true\"\n              width=\"150\"\n              prop=\"path\"\n              label=\"路由地址\"\n            />\n            <el-table-column\n              :show-overflow-tooltip=\"true\"\n              prop=\"component\"\n              width=\"150\"\n              label=\"组件路径\"\n            />\n            <el-table-column\n              prop=\"icon\"\n              label=\"菜单图标\"\n              align=\"center\"\n              width=\"80px\"\n            >\n              <template slot-scope=\"scope\">\n                <i\n                  v-if=\"scope.row.icon.includes('el-icon')\"\n                  :class=\"scope.row.icon ? scope.row.icon : ''\"\n                />\n                <svg-icon\n                  v-else\n                  :icon-class=\"scope.row.icon ? scope.row.icon : ''\"\n                />\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"sort\" align=\"center\" label=\"菜单排序\">\n              <template slot-scope=\"scope\">\n                {{ scope.row.sort }}\n              </template>\n            </el-table-column>\n            <el-table-column\n              :show-overflow-tooltip=\"true\"\n              prop=\"createTime\"\n              width=\"155\"\n              label=\"创建日期\"\n            >\n              <template slot-scope=\"scope\">\n                <span>{{ parseTime(scope.row.createTime) }}</span>\n              </template>\n            </el-table-column>\n            <el-table-column\n              label=\"操作\"\n              width=\"160\"\n              align=\"center\"\n              fixed=\"right\"\n            >\n              <template slot-scope=\"scope\">\n                <el-button\n                  size=\"mini\"\n                  type=\"text\"\n                  round\n                  @click=\"doEdit(scope.row.id)\"\n                >编辑菜单</el-button>\n              </template>\n            </el-table-column>\n          </el-table>\n        </el-tab-pane>\n      </el-tabs>\n    </el-row>\n  </div>\n</template>\n\n<script>\nimport SelectIcon from '@/components/SelectIcon'\nimport { mapGetters } from 'vuex'\nimport { parseTime } from '@/utils/index'\nimport { getMenuList, getMenuById, saveMenu, deleteMenu } from '@/api/menu'\nimport Treeselect from '@riophae/vue-treeselect'\nimport '@riophae/vue-treeselect/dist/vue-treeselect.css'\nexport default {\n  name: '菜单管理',\n  components: { SelectIcon, Treeselect },\n  data() {\n    return {\n      activeName: 'menuList',\n      showDialog: false,\n      loading: false,\n      formLoading: false,\n      form: {},\n      menus: [],\n      menuTree: [],\n      selections: [],\n      name: '',\n      createTime: null,\n      rules: {\n        name: [\n          { required: true, message: '请输入菜单名称', trigger: 'blur' }\n        ],\n        path: [\n          { required: true, message: '请输入路由地址', trigger: 'blur' }\n        ],\n        component: [\n          { required: true, message: '请输入组件路径', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'baseApi'\n    ])\n  },\n  created() {\n    var param = { name: '' }\n    getMenuList(param).then(res => {\n      if (res) {\n        this.menuTree = this.ArrayToTreeData(res)\n      }\n    })\n  },\n  methods: {\n    parseTime,\n    doQuery() {\n      this.menus = []\n      var param = { name: this.name }\n      if (this.createTime != null) {\n        param.createTimeStart = Date.parse(this.createTime[0])\n        param.createTimeEnd = Date.parse(this.createTime[1])\n      }\n      getMenuList(param).then(res => {\n        if (res) {\n          this.menus = res\n          this.menuTree = this.ArrayToTreeData(res)\n        }\n      })\n    },\n    doAdd() {\n      this.form = { icon: '' }\n      this.showDialog = true\n      this.formLoading = false\n    },\n    doSubmit(menu) {\n      this.$refs.form.validate(valid => {\n        if (valid) {\n          // 判断菜单id与父菜单id是否一样\n          if (menu.pid === undefined) {\n            menu.pid = null\n          }\n          if (menu.id && menu.id === menu.pid) {\n            this.$notify({\n              title: '上级菜单不能是自己',\n              type: 'error',\n              duration: 2500\n            })\n            return\n          }\n          // console.log(menu)\n          this.formLoading = true\n          saveMenu(menu).then(res => {\n            if (res) {\n              this.showDialog = false\n              this.$notify({\n                title: '保存成功',\n                type: 'success',\n                duration: 2500\n              })\n              this.doQuery()\n            }\n          }).catch(() => {\n            this.formLoading = false\n          })\n        }\n      })\n    },\n    doDelete() {\n      const ids = []\n      this.selections.forEach((res) => {\n        ids.push(res.id)\n      })\n      this.$confirm(`确认删除这些菜单吗?`, '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() =>\n        deleteMenu(ids).then(res => {\n          if (res) {\n            this.$notify({\n              title: '删除成功',\n              type: 'success',\n              duration: 2500\n            })\n            this.doQuery()\n          }\n        })\n      ).catch(() => {\n      })\n    },\n    // 选择改变\n    selectionChangeHandler(val) {\n      this.selections = val\n    },\n    // 选择所有\n    selectAllChange(selection) {\n      // 如果选中的数目与请求到的数目相同就选中子节点，否则就清空选中\n      if (selection && selection.length === this.menuTree.length) {\n        selection.forEach(val => {\n          this.selectChange(selection, val)\n        })\n      } else {\n        this.$refs.table.clearSelection()\n      }\n    },\n    // 单个选中\n    selectChange(selection, row) {\n      // 如果selection中存在row代表是选中，否则是取消选中\n      if (selection.find(val => { return val.id === row.id })) {\n        if (row.children) {\n          row.children.forEach(val => {\n            this.$refs.table.toggleRowSelection(val, true)\n\n            // 过滤重复值\n            let i = 0\n            let exist = false\n            for (i = 0; i < selection.length; i++) {\n              if (selection[i].id === val.id) {\n                exist = true\n                break\n              }\n            }\n            if (!exist) {\n              selection.push(val)\n            }\n\n            if (val.children) {\n              this.selectChange(selection, val)\n            }\n          })\n        }\n      } else {\n        this.toggleRowSelection(selection, row)\n      }\n    },\n    // 取消选中\n    toggleRowSelection(selection, data) {\n      if (data.children) {\n        this.$nextTick(() => {\n          data.children.forEach(val => {\n            this.$refs.table.toggleRowSelection(val, false)\n            if (val.children) {\n              this.toggleRowSelection(selection, val)\n            }\n          })\n        })\n      }\n    },\n\n    doEdit(id) {\n      this.showDialog = true\n      this.formLoading = true\n      this.form = {}\n      getMenuById(id).then(res => {\n        this.form = res\n        this.formLoading = false\n      })\n    },\n    doCancel() {\n      this.showDialog = false\n      this.formLoading = true\n      this.form = {}\n    },\n    ArrayToTreeData(data) {\n      const cloneData = JSON.parse(JSON.stringify(data)) // 对源数据深度克隆\n      return cloneData.filter(father => {\n        const branchArr = cloneData.filter(child => father.id === child.pid) // 返回每一项的子级数组\n        branchArr.length > 0 ? father.children = branchArr : '' // 如果存在子级，则给父级添加一个children属性，并赋值\n        const parentArr = cloneData.filter(parent => parent.id === father.pid) // 判断该菜单的父级菜单是否存在\n        if (parentArr.length === 0) { return father } // 如果该菜单的父级菜单不存在，则直接返回该菜单\n        return father.pid === null // 返回第一层\n      })\n    },\n    // 选中图标\n    selected(name) {\n      this.form.icon = name\n    }\n  }\n}\n\n</script>\n\n<style rel=\"stylesheet/scss\" lang=\"scss\">\n.avatar {\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n}\n</style>\n\n<style rel=\"stylesheet/scss\" lang=\"scss\" scoped>\n::v-deep .el-input-number .el-input__inner {\n  text-align: left;\n}\n\n::v-deep .vue-treeselect__control,\n::v-deep .vue-treeselect__placeholder,\n::v-deep .vue-treeselect__single-value {\n  height: 30px;\n  line-height: 30px;\n}\n</style>\n"]}]}