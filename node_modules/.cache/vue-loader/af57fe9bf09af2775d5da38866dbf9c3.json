{"remainingRequest":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mcsjourneys/Desktop/startup-frontend-main/src/views/bbs/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/src/views/bbs/index.vue","mtime":1655109659000},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/cache-loader/dist/cjs.js","mtime":1715598879413},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/babel-loader/lib/index.js","mtime":1715598884187},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/cache-loader/dist/cjs.js","mtime":1715598879413},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/vue-loader/lib/index.js","mtime":1715598879453}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHBhcnNlVGltZSB9IGZyb20gJ0AvdXRpbHMvaW5kZXgnCmltcG9ydCB7IGNyZWF0ZUJicywgZ2V0QmJzUGFnZUxpc3QgfSBmcm9tICdAL2FwaS9iYnMnCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbmlja05hbWU6ICcnLAogICAgICBtZXNzYWdlOiAnJywKICAgICAgcGFnZXNpemU6IDMsCiAgICAgIGN1cnJlbnRQYWdlOiAxLAogICAgICB0b3RhbDogMCwKICAgICAgcGFnZW1lc3NhZ2VzOiBbXQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZG9RdWVyeSgpCiAgfSwKICBtZXRob2RzOiB7CiAgICBwYXJzZVRpbWUsCiAgICAvLyDlkI7lj7Dmn6Xor6IKICAgIGRvUXVlcnkoKSB7CiAgICAgIHRoaXMucGFnZW1lc3NhZ2VzID0gW10KICAgICAgdmFyIHBhcmFtID0geyB1c2VyTmFtZTogJycgfQogICAgICBwYXJhbS5wYWdlU2l6ZSA9IHRoaXMucGFnZXNpemUKICAgICAgcGFyYW0uY3VycmVudFBhZ2UgPSB0aGlzLmN1cnJlbnRQYWdlCiAgICAgIGdldEJic1BhZ2VMaXN0KHBhcmFtKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcykgewogICAgICAgICAgdGhpcy50b3RhbCA9IHJlcy50b3RhbAogICAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IHJlcy5jdXJyZW50UGFnZQogICAgICAgICAgdGhpcy5wYWdlbWVzc2FnZXMgPSByZXMuYmJzTGlzdAogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICAvLyDnv7vpobUKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSB2YWwKICAgICAgdGhpcy5wYWdlbWVzc2FnZXMgPSBbXQogICAgICB0aGlzLmRvUXVlcnkoKQogICAgfSwKICAgIC8vIOaPkOS6pOeVmeiogAogICAgc3VibWl0TWVzc2FnZSgpIHsKICAgICAgaWYgKHRoaXMubmlja05hbWUgPT09ICcnIHx8IHRoaXMubmlja05hbWUucmVwbGFjZSgvKF5ccyopfChccyokKS9nLCAnJykgPT09ICcnKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSgn6K+36L6T5YWl5pi156ewJykKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICBpZiAodGhpcy5tZXNzYWdlID09PSAnJyB8fCB0aGlzLm1lc3NhZ2UucmVwbGFjZSgvKF5ccyopfChccyokKS9nLCAnJykgPT09ICcnKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSgn55WZ6KiA5LiN6IO95Li656m6JykKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICAvLyAg5L+d5a2Y5pWw5o2uCiAgICAgIGNvbnN0IHBhcmFtID0geyBuaWNrTmFtZTogdGhpcy5uaWNrTmFtZSwgY29udGVudDogdGhpcy5tZXNzYWdlIH0KICAgICAgY3JlYXRlQmJzKHBhcmFtKS50aGVuKChyZXMpID0+IHsKICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgdGl0bGU6ICfkv53lrZjmiJDlip8nLAogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgZHVyYXRpb246IDI1MDAKICAgICAgICB9KQogICAgICAgIGlmIChyZXMpIHsKICAgICAgICAgIHRoaXMubmlja05hbWUgPSAnJwogICAgICAgICAgdGhpcy5tZXNzYWdlID0gJycKICAgICAgICAgIHRoaXMuaGFuZGxlQ3VycmVudENoYW5nZSgxKQogICAgICAgIH0KICAgICAgfSkKICAgIH0KICB9Cgp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"index.vue","sourceRoot":"src/views/bbs","sourcesContent":["<template>\n  <div>\n    <el-card class=\"el-card-d\" shadow=\"always\">\n      <el-timeline infinite-scroll-disabled=\"disabled\">\n        <div v-if=\"pagemessages.length > 0\">\n          <el-timeline-item\n            v-for=\"(item, index) in pagemessages\"\n            :key=\"index\"\n            :timestamp=\"parseTime(item.createTime, '{y}-{m}-{d}')\"\n            placement=\"top\"\n          >\n            <el-card class=\"el-card-m\">\n              <span class=\"el-card-m-content\">{{ item.content }}</span>\n              <div />\n              <span class=\"el-card-m-nick-name\">{{ item.nickName }} 提交于 {{ parseTime(item.createTime) }}  </span>\n              <div />\n              <span v-if=\"item.replyContent\" class=\"el-card-m-reply\">{{ item.replyName }}回复：{{ item.replyContent }} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ {{ parseTime(item.replyTime) }}] </span>\n            </el-card>\n          </el-timeline-item>\n        </div>\n        <div v-else>\n          <el-timeline-item placement=\"top\">\n            <el-card class=\"el-card-m\">\n              <p class=\"el-card-m-nick-name\">  没有任何留言</p>\n            </el-card>\n          </el-timeline-item>\n        </div>\n      </el-timeline>\n      <el-pagination\n        background\n        :current-page=\"currentPage\"\n        :page-size=\"pagesize\"\n        layout=\"prev, pager, next\"\n        :total=\"total\"\n        :hide-on-single-page=\"true\"\n        @current-change=\"handleCurrentChange\"\n      />\n\n    </el-card>\n    <div class=\"el-card-messages\">\n      <el-input v-model=\"nickName\" size=\"mini\" class=\"message-nick-name\">\n        <template slot=\"prepend\">昵称：</template>\n      </el-input>\n      <el-input\n        slot=\"prepend\"\n        v-model=\"message\"\n        type=\"textarea\"\n        :rows=\"2\"\n        class=\"message-text\"\n        placeholder=\"输入留言\"\n        maxlength=\"200\"\n      />\n\n      <el-button\n        type=\"info\"\n        round\n        class=\"submit-message\"\n        size=\"mini\"\n        @click=\"submitMessage\"\n      >留言</el-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { parseTime } from '@/utils/index'\nimport { createBbs, getBbsPageList } from '@/api/bbs'\nexport default {\n  data() {\n    return {\n      nickName: '',\n      message: '',\n      pagesize: 3,\n      currentPage: 1,\n      total: 0,\n      pagemessages: []\n    }\n  },\n  created() {\n    this.doQuery()\n  },\n  methods: {\n    parseTime,\n    // 后台查询\n    doQuery() {\n      this.pagemessages = []\n      var param = { userName: '' }\n      param.pageSize = this.pagesize\n      param.currentPage = this.currentPage\n      getBbsPageList(param).then(res => {\n        if (res) {\n          this.total = res.total\n          this.currentPage = res.currentPage\n          this.pagemessages = res.bbsList\n        }\n      })\n    },\n    // 翻页\n    handleCurrentChange(val) {\n      this.currentPage = val\n      this.pagemessages = []\n      this.doQuery()\n    },\n    // 提交留言\n    submitMessage() {\n      if (this.nickName === '' || this.nickName.replace(/(^\\s*)|(\\s*$)/g, '') === '') {\n        this.$message('请输入昵称')\n        return\n      }\n      if (this.message === '' || this.message.replace(/(^\\s*)|(\\s*$)/g, '') === '') {\n        this.$message('留言不能为空')\n        return\n      }\n      //  保存数据\n      const param = { nickName: this.nickName, content: this.message }\n      createBbs(param).then((res) => {\n        this.$notify({\n          title: '保存成功',\n          type: 'success',\n          duration: 2500\n        })\n        if (res) {\n          this.nickName = ''\n          this.message = ''\n          this.handleCurrentChange(1)\n        }\n      })\n    }\n  }\n\n}\n</script>\n\n<style scoped>\n.el-card-d {\n  float: left;\n  margin-top: 20px;\n  margin-left: 10%;\n  width: 80%;\n  height: 500px;\n  background: rgb(252, 250, 250);\n}\n\n.el-card-m{\n    height: 100px;\n}\n\n.el-card-m-content{\n    display: block;\n    font-weight: bold;\n}\n\n.el-card-m-nick-name{\n    display: block;\n    font-size: x-small;\n    margin-top: 15px;\n    color: gray;\n}\n\n.el-card-m-reply{\n    display: block;\n    font-size: xx-small;\n    margin-top: 15px;\n    color: gray;\n\n}\n\n.el-card-messages {\n  float: left;\n  margin-top: 20px;\n  margin-left: 10%;\n  width: 70%;\n}\n\n.message-nick-name {\n  width: 50%;\n}\n.message-text {\n  margin-top: 10px;\n  display: block;\n  width: 50%;\n}\n\n.submit-message {\n  margin-top: 10px;\n  width: 80px;\n  background: rgb(235, 245, 247);\n  color: cadetblue;\n  text-align: center;\n  letter-spacing: 20px;\n}\n</style>\n"]}]}