{"remainingRequest":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mcsjourneys/Desktop/startup-frontend-main/src/views/user/center.vue?vue&type=style&index=0&id=17d1bb22&rel=stylesheet%2Fscss&lang=scss","dependencies":[{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/src/views/user/center.vue","mtime":1655109659000},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/css-loader/dist/cjs.js","mtime":1715598878831},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1715598879821},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/postcss-loader/src/index.js","mtime":1715598882466},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/sass-loader/dist/cjs.js","mtime":1715598879029},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/cache-loader/dist/cjs.js","mtime":1715598879413},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/vue-loader/lib/index.js","mtime":1715598879453}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5hdmF0YXIgewogIHdpZHRoOiAxMjBweDsKICBoZWlnaHQ6IDEyMHB4OwogIGJvcmRlci1yYWRpdXM6IDUwJTsKfQoudXNlci1pbmZvIHsKICBwYWRkaW5nLWxlZnQ6IDA7CiAgbGlzdC1zdHlsZTogbm9uZTsKICBsaSB7CiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2YwZjNmNDsKICAgIHBhZGRpbmc6IDExcHggMDsKICAgIGZvbnQtc2l6ZTogMTNweDsKICB9CiAgLnVzZXItcmlnaHQgewogICAgd2lkdGg6IDI1MHB4OwogICAgZmxvYXQ6IHJpZ2h0OwogICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7CiAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsKICAgIHRleHQtYWxpZ246IHJpZ2h0OwogIH0KfQo="},{"version":3,"sources":["center.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"center.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-row :gutter=\"20\">\n      <el-col\n        :xs=\"24\"\n        :sm=\"24\"\n        :md=\"10\"\n        :lg=\"9\"\n        :xl=\"8\"\n        style=\"margin-bottom: 10px\"\n      >\n        <el-card class=\"box-card\">\n          <div slot=\"header\" class=\"clearfix\">\n            <span>个人信息</span>\n          </div>\n          <div>\n            <div style=\"text-align: center\">\n              <div class=\"el-upload\">\n                <myUpload\n\n                  v-model=\"showDialog\"\n                  :headers=\"headers\"\n                  :url=\"baseApi+'/api/user/updateAvatar'\"\n                  @crop-upload-success=\"cropUploadSuccess\"\n                />\n                <img\n                  :src=\"\n                    user.avatarUrl\n                      ? baseApi + '/file/' + user.avatarUrl\n                      : Avatar\n                  \"\n                  title=\"点击上传头像\"\n                  class=\"avatar\"\n                  @click=\"toggleShow\"\n                >\n\n              </div>\n            </div>\n            <ul class=\"user-info\">\n              <li>\n                <div style=\"height: 100%\">\n                  <i class=\"el-icon-user\" /> 登录账号\n                  <div class=\"user-right\">{{ user.userName }}</div>\n                </div>\n              </li>\n              <li>\n                <i class=\"el-icon-picture-outline-round\" /> 用户昵称\n                <div class=\"user-right\">{{ user.nickName }}</div>\n              </li>\n              <li v-if=\"user.dept!=null\"><svg-icon icon-class=\"dept\" /> 公司名称 <div class=\"user-right\"> {{ user.dept.name }}</div></li>\n              <li>\n                <i class=\"el-icon-mobile-phone\" /> 电话号码\n                <div class=\"user-right\">{{ user.phone }}</div>\n              </li>\n              <li>\n                <i class=\"el-icon-location-information\" /> 所在地区\n                <div class=\"user-right\">{{ user.province }} {{ user.city }} {{ user.country }}</div>\n              </li>\n            </ul>\n          </div>\n        </el-card>\n      </el-col>\n      <el-col :xs=\"24\" :sm=\"24\" :md=\"13\" :lg=\"14\" :xl=\"15\">\n        <!--    用户资料更新    -->\n        <el-card class=\"box-card\">\n          <el-tabs v-model=\"activeName\">\n            <el-tab-pane label=\"资料更新\" name=\"first\">\n              <el-form\n                ref=\"form\"\n                :model=\"form\"\n                :rules=\"rules\"\n                style=\"margin-top: 10px\"\n                size=\"small\"\n                label-width=\"65px\"\n              >\n                <el-form-item label=\"昵称\" prop=\"nickName\">\n                  <el-input v-model=\"form.nickName\" style=\"width: 35%\" />\n                  <span\n                    style=\"color: #c0c0c0; margin-left: 10px\"\n                  >用户昵称不作为登录使用</span>\n                </el-form-item>\n                <el-form-item label=\"电话\" prop=\"phone\">\n                  <el-input v-model=\"form.phone\" style=\"width: 35%\" />\n                  <span\n                    style=\"color: #c0c0c0; margin-left: 10px\"\n                  >电话号码不能重复</span>\n                </el-form-item>\n                <el-form-item label=\"性别\">\n                  <el-radio-group v-model=\"form.gender\" style=\"width: 178px\">\n                    <el-radio :label=\"1\">男</el-radio>\n                    <el-radio :label=\"2\">女</el-radio>\n                  </el-radio-group>\n                </el-form-item>\n                <el-form-item label=\"城市\" prop=\"city\" size=\"mini\">\n                  <el-cascader\n                    v-model=\"selectedOptions\"\n                    size=\"mini\"\n                    :options=\"options\"\n                    filterable\n                    clearable\n                    style=\"width: 250px\"\n                    @change=\"handleChange\"\n                  />\n                </el-form-item>\n                <el-form-item label=\"\">\n                  <el-button\n                    :loading=\"saveLoading\"\n                    size=\"mini\"\n                    type=\"primary\"\n                    @click=\"doSubmit\"\n                  >更新信息</el-button>\n                </el-form-item>\n              </el-form>\n            </el-tab-pane>\n          </el-tabs>\n        </el-card>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\nimport myUpload from 'vue-image-crop-upload'\nimport { mapGetters } from 'vuex'\nimport { getToken } from '@/utils/auth'\nimport store from '@/store'\nimport { saveUser } from '@/api/user'\nimport Avatar from '@/assets/images/avatar.png'\nimport { regionData, CodeToText, TextToCode } from 'element-china-area-data'\nexport default {\n  name: 'Center',\n  components: { myUpload },\n  data() {\n    return {\n      showDialog: false,\n      Avatar: Avatar,\n      activeName: 'first',\n      saveLoading: false,\n      headers: {\n        'Authorization': getToken()\n      },\n      form: {},\n      options: regionData,\n      selectedOptions: [],\n      rules: {\n        nickName: [\n          { required: true, message: '请输入用户昵称', trigger: 'blur' },\n          { min: 2, max: 20, message: '长度在 2 到 20 个字符', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'user',\n      'baseApi'\n    ])\n  },\n  created() {\n    store.dispatch('getInfo').then(() => {\n      this.form = { id: this.user.id, nickName: this.user.nickName, gender: this.user.gender, phone: this.user.phone,\n        province: this.user.province, city: this.user.city, country: this.user.country }\n      if (this.form.country !== '') {\n        this.selectedOptions = [TextToCode[this.form.province].code, TextToCode[this.form.province][this.form.city].code, TextToCode[this.form.province][this.form.city][this.form.country].code]\n      } else {\n        this.selectedOptions = [TextToCode[this.form.province].code, TextToCode[this.form.province][this.form.city].code]\n      }\n    })\n  },\n  methods: {\n    handleChange(value) {\n      this.form.province = ''\n      this.form.city = ''\n      this.form.country = ''\n      for (let i = 0; i < this.selectedOptions.length; i++) {\n        if (i === 0) { this.form.province = CodeToText[this.selectedOptions[i]] }\n        if (i === 1) { this.form.city = CodeToText[this.selectedOptions[i]] }\n        if (i === 2) { this.form.country = CodeToText[this.selectedOptions[i]] }\n      }\n    },\n    toggleShow() {\n      this.showDialog = !this.showDialog\n    },\n    cropUploadSuccess(jsonData, field) {\n      store.dispatch('getInfo').then(() => { })\n    },\n    doSubmit() {\n      if (this.$refs['form']) {\n        this.$refs['form'].validate((valid) => {\n          if (valid) {\n            this.saveLoading = true\n            saveUser(this.form).then(() => {\n              this.$notify({\n                title: '更新成功',\n                type: 'success',\n                duration: 2500\n              })\n              store.dispatch('getInfo').then(() => { })\n              this.saveLoading = false\n            }).catch(() => {\n              this.saveLoading = false\n            })\n          }\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style rel=\"stylesheet/scss\" lang=\"scss\">\n.avatar {\n  width: 120px;\n  height: 120px;\n  border-radius: 50%;\n}\n.user-info {\n  padding-left: 0;\n  list-style: none;\n  li {\n    border-bottom: 1px solid #f0f3f4;\n    padding: 11px 0;\n    font-size: 13px;\n  }\n  .user-right {\n    width: 250px;\n    float: right;\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    text-align: right;\n  }\n}\n</style>\n"]}]}