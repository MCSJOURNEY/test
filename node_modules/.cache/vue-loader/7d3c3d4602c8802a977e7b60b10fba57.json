{"remainingRequest":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mcsjourneys/Desktop/startup-frontend-main/src/views/bbs/admin.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/src/views/bbs/admin.vue","mtime":1655109659000},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/cache-loader/dist/cjs.js","mtime":1715598879413},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/babel-loader/lib/index.js","mtime":1715598884187},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/cache-loader/dist/cjs.js","mtime":1715598879413},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/vue-loader/lib/index.js","mtime":1715598879453}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JwppbXBvcnQgeyBwYXJzZVRpbWUgfSBmcm9tICdAL3V0aWxzL2luZGV4JwppbXBvcnQgeyBnZXRCYnNQYWdlTGlzdCwgZGVsZXRlQmJzLCBnZXRCYnNCeUlkLCB1cGRhdGVCYnMgfSBmcm9tICdAL2FwaS9iYnMnCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAn55WZ6KiA566h55CGJywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYWN0aXZlTmFtZTogJ2Jic0xpc3QnLAogICAgICBzaG93RGlhbG9nOiBmYWxzZSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGZvcm1Mb2FkaW5nOiB0cnVlLAogICAgICBmb3JtOiB7fSwKICAgICAgdG90YWw6IDAsCiAgICAgIGN1cnJlbnRQYWdlOiAxLAogICAgICBwYWdlU2l6ZTogNSwKICAgICAgYmJzTGlzdDogW10sCiAgICAgIHNlbGVjdGlvbnM6IFtdLAogICAgICBuaWNrTmFtZTogJycsCiAgICAgIHJlcGxpZWQ6IG51bGwsCiAgICAgIG9wdGlvbnM6IFt7CiAgICAgICAgdmFsdWU6IHRydWUsCiAgICAgICAgbGFiZWw6ICfmmK8nCiAgICAgIH0sIHsKICAgICAgICB2YWx1ZTogZmFsc2UsCiAgICAgICAgbGFiZWw6ICflkKYnCiAgICAgIH1dLAogICAgICBjcmVhdGVUaW1lOiBudWxsLAogICAgICByb2xlczogW10sCiAgICAgIHVzZXJSb2xlczogW10KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKFsKICAgICAgJ3VzZXInCiAgICBdKQogIH0sCiAgbWV0aG9kczogewogICAgcGFyc2VUaW1lLAogICAgc2VhcmNoKCkgewogICAgICB0aGlzLmN1cnJlbnRQYWdlID0gMQogICAgICB0aGlzLmRvUXVlcnkoKQogICAgfSwKICAgIGRvUXVlcnkoKSB7CiAgICAgIHRoaXMudXNlcnMgPSBbXQogICAgICB2YXIgcGFyYW0gPSB7IG5pY2tOYW1lOiB0aGlzLm5pY2tOYW1lLCByZXBsaWVkOiB0aGlzLnJlcGxpZWQgfQogICAgICBpZiAodGhpcy5jcmVhdGVUaW1lICE9IG51bGwpIHsKICAgICAgICBwYXJhbS5jcmVhdGVUaW1lU3RhcnQgPSBEYXRlLnBhcnNlKHRoaXMuY3JlYXRlVGltZVswXSkKICAgICAgICBwYXJhbS5jcmVhdGVUaW1lRW5kID0gRGF0ZS5wYXJzZSh0aGlzLmNyZWF0ZVRpbWVbMV0pCiAgICAgIH0KICAgICAgcGFyYW0ucGFnZVNpemUgPSB0aGlzLnBhZ2VTaXplCiAgICAgIHBhcmFtLmN1cnJlbnRQYWdlID0gdGhpcy5jdXJyZW50UGFnZQogICAgICBnZXRCYnNQYWdlTGlzdChwYXJhbSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMpIHsKICAgICAgICAgIHRoaXMudG90YWwgPSByZXMudG90YWwKICAgICAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSByZXMuY3VycmVudFBhZ2UKICAgICAgICAgIHRoaXMuYmJzTGlzdCA9IHJlcy5iYnNMaXN0CiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIGhhbmRsZVNpemVDaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMucGFnZVNpemUgPSB2YWwKICAgICAgdGhpcy5kb1F1ZXJ5KCkKICAgIH0sCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkgewogICAgICB0aGlzLmN1cnJlbnRQYWdlID0gdmFsCiAgICAgIHRoaXMuZG9RdWVyeSgpCiAgICB9LAogICAgZG9EZWxldGUoKSB7CiAgICAgIGNvbnN0IGlkcyA9IFtdCiAgICAgIHRoaXMuc2VsZWN0aW9ucy5mb3JFYWNoKChyZXMpID0+IHsKICAgICAgICBpZHMucHVzaChyZXMuaWQpCiAgICAgIH0pCiAgICAgIHRoaXMuJGNvbmZpcm0oYOehruiupOWIoOmZpOi/meS6m+eVmeiogOWQlz9gLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbigoKSA9PgogICAgICAgIGRlbGV0ZUJicyhpZHMpLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGlmIChyZXMpIHsKICAgICAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgICB0aXRsZTogJ+WIoOmZpOaIkOWKnycsCiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgIGR1cmF0aW9uOiAyNTAwCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIHRoaXMuc2VhcmNoKCkKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICApLmNhdGNoKCgpID0+IHsKICAgICAgfSkKICAgIH0sCiAgICAvLyDpgInmi6nmlLnlj5gKICAgIHNlbGVjdGlvbkNoYW5nZUhhbmRsZXIodmFsKSB7CiAgICAgIHRoaXMuc2VsZWN0aW9ucyA9IHZhbAogICAgfSwKICAgIGRvUmVwbHkoaWQpIHsKICAgICAgdGhpcy5mb3JtID0ge30KICAgICAgdGhpcy51c2VyUm9sZXMgPSBbXQogICAgICB0aGlzLnJvbGVzID0gW10KICAgICAgdGhpcy5zaG93RGlhbG9nID0gdHJ1ZQogICAgICB0aGlzLmZvcm1Mb2FkaW5nID0gdHJ1ZQogICAgICBnZXRCYnNCeUlkKGlkKS50aGVuKChyZXMpID0+IHsKICAgICAgICBpZiAocmVzKSB7CiAgICAgICAgICB0aGlzLmZvcm0gPSByZXMKICAgICAgICB9CiAgICAgICAgdGhpcy5mb3JtTG9hZGluZyA9IGZhbHNlCiAgICAgIH0pCiAgICB9LAogICAgZG9DYW5jZWwoKSB7CiAgICAgIHRoaXMuc2hvd0RpYWxvZyA9IGZhbHNlCiAgICAgIHRoaXMuZm9ybSA9IHt9CiAgICB9LAogICAgZG9TdWJtaXQoKSB7CiAgICAgIGNvbnN0IGJicyA9IHsgaWQ6IHRoaXMuZm9ybS5pZCwgcmVwbGllZDogdHJ1ZSwgcmVwbHlOYW1lOiB0aGlzLnVzZXIubmlja05hbWUsCiAgICAgICAgcmVwbHlDb250ZW50OiB0aGlzLmZvcm0ucmVwbHlDb250ZW50IH0KICAgICAgdGhpcy5mb3JtTG9hZGluZyA9IHRydWUKICAgICAgdXBkYXRlQmJzKGJicykudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy5zaG93RGlhbG9nID0gZmFsc2UKICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgdGl0bGU6ICfkv53lrZjmiJDlip8nLAogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgZHVyYXRpb246IDI1MDAKICAgICAgICB9KQogICAgICAgIHRoaXMuZG9RdWVyeSgpCiAgICAgIH0pCiAgICB9CiAgfQp9Cgo="},{"version":3,"sources":["admin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"admin.vue","sourceRoot":"src/views/bbs","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <!--工具栏-->\n    <div class=\"head-container\">\n      <!-- 搜索 -->\n      <el-input\n        v-model=\"nickName\"\n        size=\"small\"\n        clearable\n        placeholder=\"输入用户昵称搜索\"\n        style=\"width: 200px\"\n        class=\"filter-item\"\n        @keyup.enter.native=\"search\"\n      />\n      <el-select\n        v-model=\"replied\"\n        placeholder=\"是否已回复\"\n        clearable\n        size=\"small\"\n        style=\"width: 120px\"\n        class=\"filter-item\"\n      >\n        <el-option\n          v-for=\"item in options\"\n          :key=\"item.value\"\n          :label=\"item.label\"\n          :value=\"item.value\"\n        />\n      </el-select>\n      <el-date-picker\n        v-model=\"createTime\"\n        :default-time=\"['00:00:00', '23:59:59']\"\n        type=\"daterange\"\n        range-separator=\":\"\n        size=\"small\"\n        class=\"date-item\"\n        value-format=\"yyyy-MM-dd HH:mm:ss\"\n        start-placeholder=\"开始日期\"\n        end-placeholder=\"结束日期\"\n      />\n      <el-button\n        class=\"filter-item\"\n        size=\"mini\"\n        type=\"success\"\n        icon=\"el-icon-search\"\n        @click=\"search\"\n      >搜索</el-button>\n      <el-button\n        class=\"filter-item\"\n        size=\"mini\"\n        type=\"danger\"\n        icon=\"el-icon-circle-plus-outline\"\n        :disabled=\"selections.length === 0\"\n        @click=\"doDelete\"\n      >删除</el-button>\n    </div>\n\n    <el-row>\n      <!--回复留言表单-->\n      <el-dialog\n        append-to-body\n        :close-on-click-modal=\"false\"\n        :visible.sync=\"showDialog\"\n        width=\"600px\"\n      >\n        <el-form\n          ref=\"form\"\n          :model=\"form\"\n          size=\"small\"\n          label-width=\"76px\"\n        >\n          <el-form-item label=\"留言信息\" prop=\"\">\n            <el-card class=\"el-card-m\">\n              <span class=\"el-card-m-content\">{{ form.content }}</span>\n              <div />\n              <span class=\"el-card-m-nick-name\">{{ form.nickName }} 提交于 {{ parseTime(form.createTime) }}  </span>\n            </el-card>\n          </el-form-item>\n          <el-form-item label=\"回复留言\" prop=\"replyContent\">\n            <el-input\n              v-model=\"form.replyContent\"\n              rows=\"5\"\n              type=\"textarea\"\n            />\n          </el-form-item>\n\n        </el-form>\n        <div slot=\"footer\" class=\"dialog-footer\">\n          <el-button type=\"text\" @click=\"doCancel\">取消</el-button>\n          <el-button\n            :loading=\"formLoading\"\n            type=\"primary\"\n            @click=\"doSubmit\"\n          >确认</el-button>\n        </div>\n      </el-dialog>\n      <el-tabs v-model=\"activeName\" type=\"border-card\">\n        <el-tab-pane label=\"留言列表\" name=\"bbsList\">\n          <el-table\n            ref=\"table\"\n            v-loading=\"loading\"\n            :data=\"bbsList\"\n            style=\"width: 100%; font-size: 12px\"\n            @selection-change=\"selectionChangeHandler\"\n          >\n            <el-table-column type=\"selection\" width=\"55\" />\n            <el-table-column\n              :show-overflow-tooltip=\"true\"\n              width=\"120\"\n              prop=\"nickName\"\n              label=\"用户昵称\"\n            />\n\n            <el-table-column\n              :show-overflow-tooltip=\"true\"\n              prop=\"content\"\n              width=\"200\"\n              label=\"留言内容\"\n            />\n\n            <el-table-column\n              :show-overflow-tooltip=\"true\"\n              prop=\"createTime\"\n              width=\"155\"\n              label=\"留言时间\"\n            >\n              <template slot-scope=\"scope\">\n                <span>{{ parseTime(scope.row.createTime) }}</span>\n              </template>\n            </el-table-column>\n\n            <el-table-column prop=\"replied\" width=\"80\" label=\"是否回复\">\n              <template slot-scope=\"scope\">\n                <el-switch\n                  v-model=\"scope.row.replied\"\n                  :disabled=\"true\"\n                />\n              </template>\n            </el-table-column>\n\n            <el-table-column\n              :show-overflow-tooltip=\"true\"\n              width=\"120\"\n              prop=\"replyName\"\n              label=\"回复人\"\n            />\n            <el-table-column\n              :show-overflow-tooltip=\"true\"\n              prop=\"replyContent\"\n              width=\"200\"\n              label=\"回复内容\"\n            />\n            <el-table-column\n              :show-overflow-tooltip=\"true\"\n              prop=\"replyTime\"\n              width=\"155\"\n              label=\"回复时间\"\n            >\n              <template slot-scope=\"scope\">\n                <span>{{ parseTime(scope.row.replyTime) }}</span>\n              </template>\n            </el-table-column>\n            <el-table-column\n              label=\"操作\"\n              width=\"120\"\n              align=\"center\"\n              fixed=\"right\"\n            >\n              <template slot-scope=\"scope\">\n                <el-button\n                  size=\"mini\"\n                  type=\"text\"\n                  round\n                  @click=\"doReply(scope.row.id)\"\n                >回复</el-button>\n              </template>\n            </el-table-column>\n          </el-table>\n          <el-pagination\n            class=\"page\"\n            background\n            :current-page=\"currentPage\"\n            :page-sizes=\"[5, 10, 15, 20]\"\n            :page-size=\"pageSize\"\n            layout=\"sizes,prev, pager, next\"\n            :total=\"total\"\n            @size-change=\"handleSizeChange\"\n            @current-change=\"handleCurrentChange\"\n          />\n        </el-tab-pane>\n      </el-tabs>\n    </el-row>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport { parseTime } from '@/utils/index'\nimport { getBbsPageList, deleteBbs, getBbsById, updateBbs } from '@/api/bbs'\nexport default {\n  name: '留言管理',\n  data() {\n    return {\n      activeName: 'bbsList',\n      showDialog: false,\n      loading: false,\n      formLoading: true,\n      form: {},\n      total: 0,\n      currentPage: 1,\n      pageSize: 5,\n      bbsList: [],\n      selections: [],\n      nickName: '',\n      replied: null,\n      options: [{\n        value: true,\n        label: '是'\n      }, {\n        value: false,\n        label: '否'\n      }],\n      createTime: null,\n      roles: [],\n      userRoles: []\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'user'\n    ])\n  },\n  methods: {\n    parseTime,\n    search() {\n      this.currentPage = 1\n      this.doQuery()\n    },\n    doQuery() {\n      this.users = []\n      var param = { nickName: this.nickName, replied: this.replied }\n      if (this.createTime != null) {\n        param.createTimeStart = Date.parse(this.createTime[0])\n        param.createTimeEnd = Date.parse(this.createTime[1])\n      }\n      param.pageSize = this.pageSize\n      param.currentPage = this.currentPage\n      getBbsPageList(param).then(res => {\n        if (res) {\n          this.total = res.total\n          this.currentPage = res.currentPage\n          this.bbsList = res.bbsList\n        }\n      })\n    },\n    handleSizeChange(val) {\n      this.pageSize = val\n      this.doQuery()\n    },\n    handleCurrentChange(val) {\n      this.currentPage = val\n      this.doQuery()\n    },\n    doDelete() {\n      const ids = []\n      this.selections.forEach((res) => {\n        ids.push(res.id)\n      })\n      this.$confirm(`确认删除这些留言吗?`, '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() =>\n        deleteBbs(ids).then(res => {\n          if (res) {\n            this.$notify({\n              title: '删除成功',\n              type: 'success',\n              duration: 2500\n            })\n            this.search()\n          }\n        })\n      ).catch(() => {\n      })\n    },\n    // 选择改变\n    selectionChangeHandler(val) {\n      this.selections = val\n    },\n    doReply(id) {\n      this.form = {}\n      this.userRoles = []\n      this.roles = []\n      this.showDialog = true\n      this.formLoading = true\n      getBbsById(id).then((res) => {\n        if (res) {\n          this.form = res\n        }\n        this.formLoading = false\n      })\n    },\n    doCancel() {\n      this.showDialog = false\n      this.form = {}\n    },\n    doSubmit() {\n      const bbs = { id: this.form.id, replied: true, replyName: this.user.nickName,\n        replyContent: this.form.replyContent }\n      this.formLoading = true\n      updateBbs(bbs).then(() => {\n        this.showDialog = false\n        this.$notify({\n          title: '保存成功',\n          type: 'success',\n          duration: 2500\n        })\n        this.doQuery()\n      })\n    }\n  }\n}\n\n</script>\n\n<style rel=\"stylesheet/scss\" lang=\"scss\">\n.el-card-m{\n    height: 100px;\n}\n\n.el-card-m-content{\n    display: block;\n    font-weight: bold;\n}\n\n.el-card-m-nick-name{\n    display: block;\n    font-size: x-small;\n    margin-top: 15px;\n    color: gray;\n}\n\n.page {\n  float: right;\n  margin-top: 5px;\n}\n</style>\n\n<style rel=\"stylesheet/scss\" lang=\"scss\" scoped>\n::v-deep .el-input-number .el-input__inner {\n  text-align: left;\n}\n</style>\n"]}]}