{"remainingRequest":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mcsjourneys/Desktop/startup-frontend-main/src/views/user/center.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/src/views/user/center.vue","mtime":1655109659000},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/cache-loader/dist/cjs.js","mtime":1715598879413},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/babel-loader/lib/index.js","mtime":1715598884187},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/cache-loader/dist/cjs.js","mtime":1715598879413},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/vue-loader/lib/index.js","mtime":1715598879453}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBteVVwbG9hZCBmcm9tICd2dWUtaW1hZ2UtY3JvcC11cGxvYWQnCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JwppbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCcKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnCmltcG9ydCB7IHNhdmVVc2VyIH0gZnJvbSAnQC9hcGkvdXNlcicKaW1wb3J0IEF2YXRhciBmcm9tICdAL2Fzc2V0cy9pbWFnZXMvYXZhdGFyLnBuZycKaW1wb3J0IHsgcmVnaW9uRGF0YSwgQ29kZVRvVGV4dCwgVGV4dFRvQ29kZSB9IGZyb20gJ2VsZW1lbnQtY2hpbmEtYXJlYS1kYXRhJwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0NlbnRlcicsCiAgY29tcG9uZW50czogeyBteVVwbG9hZCB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzaG93RGlhbG9nOiBmYWxzZSwKICAgICAgQXZhdGFyOiBBdmF0YXIsCiAgICAgIGFjdGl2ZU5hbWU6ICdmaXJzdCcsCiAgICAgIHNhdmVMb2FkaW5nOiBmYWxzZSwKICAgICAgaGVhZGVyczogewogICAgICAgICdBdXRob3JpemF0aW9uJzogZ2V0VG9rZW4oKQogICAgICB9LAogICAgICBmb3JtOiB7fSwKICAgICAgb3B0aW9uczogcmVnaW9uRGF0YSwKICAgICAgc2VsZWN0ZWRPcHRpb25zOiBbXSwKICAgICAgcnVsZXM6IHsKICAgICAgICBuaWNrTmFtZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeeUqOaIt+aYteensCcsIHRyaWdnZXI6ICdibHVyJyB9LAogICAgICAgICAgeyBtaW46IDIsIG1heDogMjAsIG1lc3NhZ2U6ICfplb/luqblnKggMiDliLAgMjAg5Liq5a2X56ymJywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICBdCiAgICAgIH0KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKFsKICAgICAgJ3VzZXInLAogICAgICAnYmFzZUFwaScKICAgIF0pCiAgfSwKICBjcmVhdGVkKCkgewogICAgc3RvcmUuZGlzcGF0Y2goJ2dldEluZm8nKS50aGVuKCgpID0+IHsKICAgICAgdGhpcy5mb3JtID0geyBpZDogdGhpcy51c2VyLmlkLCBuaWNrTmFtZTogdGhpcy51c2VyLm5pY2tOYW1lLCBnZW5kZXI6IHRoaXMudXNlci5nZW5kZXIsIHBob25lOiB0aGlzLnVzZXIucGhvbmUsCiAgICAgICAgcHJvdmluY2U6IHRoaXMudXNlci5wcm92aW5jZSwgY2l0eTogdGhpcy51c2VyLmNpdHksIGNvdW50cnk6IHRoaXMudXNlci5jb3VudHJ5IH0KICAgICAgaWYgKHRoaXMuZm9ybS5jb3VudHJ5ICE9PSAnJykgewogICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb25zID0gW1RleHRUb0NvZGVbdGhpcy5mb3JtLnByb3ZpbmNlXS5jb2RlLCBUZXh0VG9Db2RlW3RoaXMuZm9ybS5wcm92aW5jZV1bdGhpcy5mb3JtLmNpdHldLmNvZGUsIFRleHRUb0NvZGVbdGhpcy5mb3JtLnByb3ZpbmNlXVt0aGlzLmZvcm0uY2l0eV1bdGhpcy5mb3JtLmNvdW50cnldLmNvZGVdCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbnMgPSBbVGV4dFRvQ29kZVt0aGlzLmZvcm0ucHJvdmluY2VdLmNvZGUsIFRleHRUb0NvZGVbdGhpcy5mb3JtLnByb3ZpbmNlXVt0aGlzLmZvcm0uY2l0eV0uY29kZV0KICAgICAgfQogICAgfSkKICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZUNoYW5nZSh2YWx1ZSkgewogICAgICB0aGlzLmZvcm0ucHJvdmluY2UgPSAnJwogICAgICB0aGlzLmZvcm0uY2l0eSA9ICcnCiAgICAgIHRoaXMuZm9ybS5jb3VudHJ5ID0gJycKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNlbGVjdGVkT3B0aW9ucy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmIChpID09PSAwKSB7IHRoaXMuZm9ybS5wcm92aW5jZSA9IENvZGVUb1RleHRbdGhpcy5zZWxlY3RlZE9wdGlvbnNbaV1dIH0KICAgICAgICBpZiAoaSA9PT0gMSkgeyB0aGlzLmZvcm0uY2l0eSA9IENvZGVUb1RleHRbdGhpcy5zZWxlY3RlZE9wdGlvbnNbaV1dIH0KICAgICAgICBpZiAoaSA9PT0gMikgeyB0aGlzLmZvcm0uY291bnRyeSA9IENvZGVUb1RleHRbdGhpcy5zZWxlY3RlZE9wdGlvbnNbaV1dIH0KICAgICAgfQogICAgfSwKICAgIHRvZ2dsZVNob3coKSB7CiAgICAgIHRoaXMuc2hvd0RpYWxvZyA9ICF0aGlzLnNob3dEaWFsb2cKICAgIH0sCiAgICBjcm9wVXBsb2FkU3VjY2Vzcyhqc29uRGF0YSwgZmllbGQpIHsKICAgICAgc3RvcmUuZGlzcGF0Y2goJ2dldEluZm8nKS50aGVuKCgpID0+IHsgfSkKICAgIH0sCiAgICBkb1N1Ym1pdCgpIHsKICAgICAgaWYgKHRoaXMuJHJlZnNbJ2Zvcm0nXSkgewogICAgICAgIHRoaXMuJHJlZnNbJ2Zvcm0nXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgICB0aGlzLnNhdmVMb2FkaW5nID0gdHJ1ZQogICAgICAgICAgICBzYXZlVXNlcih0aGlzLmZvcm0pLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICAgICAgICB0aXRsZTogJ+abtOaWsOaIkOWKnycsCiAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjUwMAogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgc3RvcmUuZGlzcGF0Y2goJ2dldEluZm8nKS50aGVuKCgpID0+IHsgfSkKICAgICAgICAgICAgICB0aGlzLnNhdmVMb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgICAgICAgIHRoaXMuc2F2ZUxvYWRpbmcgPSBmYWxzZQogICAgICAgICAgICB9KQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0KICAgIH0KICB9Cn0K"},{"version":3,"sources":["center.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"center.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-row :gutter=\"20\">\n      <el-col\n        :xs=\"24\"\n        :sm=\"24\"\n        :md=\"10\"\n        :lg=\"9\"\n        :xl=\"8\"\n        style=\"margin-bottom: 10px\"\n      >\n        <el-card class=\"box-card\">\n          <div slot=\"header\" class=\"clearfix\">\n            <span>个人信息</span>\n          </div>\n          <div>\n            <div style=\"text-align: center\">\n              <div class=\"el-upload\">\n                <myUpload\n\n                  v-model=\"showDialog\"\n                  :headers=\"headers\"\n                  :url=\"baseApi+'/api/user/updateAvatar'\"\n                  @crop-upload-success=\"cropUploadSuccess\"\n                />\n                <img\n                  :src=\"\n                    user.avatarUrl\n                      ? baseApi + '/file/' + user.avatarUrl\n                      : Avatar\n                  \"\n                  title=\"点击上传头像\"\n                  class=\"avatar\"\n                  @click=\"toggleShow\"\n                >\n\n              </div>\n            </div>\n            <ul class=\"user-info\">\n              <li>\n                <div style=\"height: 100%\">\n                  <i class=\"el-icon-user\" /> 登录账号\n                  <div class=\"user-right\">{{ user.userName }}</div>\n                </div>\n              </li>\n              <li>\n                <i class=\"el-icon-picture-outline-round\" /> 用户昵称\n                <div class=\"user-right\">{{ user.nickName }}</div>\n              </li>\n              <li v-if=\"user.dept!=null\"><svg-icon icon-class=\"dept\" /> 公司名称 <div class=\"user-right\"> {{ user.dept.name }}</div></li>\n              <li>\n                <i class=\"el-icon-mobile-phone\" /> 电话号码\n                <div class=\"user-right\">{{ user.phone }}</div>\n              </li>\n              <li>\n                <i class=\"el-icon-location-information\" /> 所在地区\n                <div class=\"user-right\">{{ user.province }} {{ user.city }} {{ user.country }}</div>\n              </li>\n            </ul>\n          </div>\n        </el-card>\n      </el-col>\n      <el-col :xs=\"24\" :sm=\"24\" :md=\"13\" :lg=\"14\" :xl=\"15\">\n        <!--    用户资料更新    -->\n        <el-card class=\"box-card\">\n          <el-tabs v-model=\"activeName\">\n            <el-tab-pane label=\"资料更新\" name=\"first\">\n              <el-form\n                ref=\"form\"\n                :model=\"form\"\n                :rules=\"rules\"\n                style=\"margin-top: 10px\"\n                size=\"small\"\n                label-width=\"65px\"\n              >\n                <el-form-item label=\"昵称\" prop=\"nickName\">\n                  <el-input v-model=\"form.nickName\" style=\"width: 35%\" />\n                  <span\n                    style=\"color: #c0c0c0; margin-left: 10px\"\n                  >用户昵称不作为登录使用</span>\n                </el-form-item>\n                <el-form-item label=\"电话\" prop=\"phone\">\n                  <el-input v-model=\"form.phone\" style=\"width: 35%\" />\n                  <span\n                    style=\"color: #c0c0c0; margin-left: 10px\"\n                  >电话号码不能重复</span>\n                </el-form-item>\n                <el-form-item label=\"性别\">\n                  <el-radio-group v-model=\"form.gender\" style=\"width: 178px\">\n                    <el-radio :label=\"1\">男</el-radio>\n                    <el-radio :label=\"2\">女</el-radio>\n                  </el-radio-group>\n                </el-form-item>\n                <el-form-item label=\"城市\" prop=\"city\" size=\"mini\">\n                  <el-cascader\n                    v-model=\"selectedOptions\"\n                    size=\"mini\"\n                    :options=\"options\"\n                    filterable\n                    clearable\n                    style=\"width: 250px\"\n                    @change=\"handleChange\"\n                  />\n                </el-form-item>\n                <el-form-item label=\"\">\n                  <el-button\n                    :loading=\"saveLoading\"\n                    size=\"mini\"\n                    type=\"primary\"\n                    @click=\"doSubmit\"\n                  >更新信息</el-button>\n                </el-form-item>\n              </el-form>\n            </el-tab-pane>\n          </el-tabs>\n        </el-card>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\nimport myUpload from 'vue-image-crop-upload'\nimport { mapGetters } from 'vuex'\nimport { getToken } from '@/utils/auth'\nimport store from '@/store'\nimport { saveUser } from '@/api/user'\nimport Avatar from '@/assets/images/avatar.png'\nimport { regionData, CodeToText, TextToCode } from 'element-china-area-data'\nexport default {\n  name: 'Center',\n  components: { myUpload },\n  data() {\n    return {\n      showDialog: false,\n      Avatar: Avatar,\n      activeName: 'first',\n      saveLoading: false,\n      headers: {\n        'Authorization': getToken()\n      },\n      form: {},\n      options: regionData,\n      selectedOptions: [],\n      rules: {\n        nickName: [\n          { required: true, message: '请输入用户昵称', trigger: 'blur' },\n          { min: 2, max: 20, message: '长度在 2 到 20 个字符', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'user',\n      'baseApi'\n    ])\n  },\n  created() {\n    store.dispatch('getInfo').then(() => {\n      this.form = { id: this.user.id, nickName: this.user.nickName, gender: this.user.gender, phone: this.user.phone,\n        province: this.user.province, city: this.user.city, country: this.user.country }\n      if (this.form.country !== '') {\n        this.selectedOptions = [TextToCode[this.form.province].code, TextToCode[this.form.province][this.form.city].code, TextToCode[this.form.province][this.form.city][this.form.country].code]\n      } else {\n        this.selectedOptions = [TextToCode[this.form.province].code, TextToCode[this.form.province][this.form.city].code]\n      }\n    })\n  },\n  methods: {\n    handleChange(value) {\n      this.form.province = ''\n      this.form.city = ''\n      this.form.country = ''\n      for (let i = 0; i < this.selectedOptions.length; i++) {\n        if (i === 0) { this.form.province = CodeToText[this.selectedOptions[i]] }\n        if (i === 1) { this.form.city = CodeToText[this.selectedOptions[i]] }\n        if (i === 2) { this.form.country = CodeToText[this.selectedOptions[i]] }\n      }\n    },\n    toggleShow() {\n      this.showDialog = !this.showDialog\n    },\n    cropUploadSuccess(jsonData, field) {\n      store.dispatch('getInfo').then(() => { })\n    },\n    doSubmit() {\n      if (this.$refs['form']) {\n        this.$refs['form'].validate((valid) => {\n          if (valid) {\n            this.saveLoading = true\n            saveUser(this.form).then(() => {\n              this.$notify({\n                title: '更新成功',\n                type: 'success',\n                duration: 2500\n              })\n              store.dispatch('getInfo').then(() => { })\n              this.saveLoading = false\n            }).catch(() => {\n              this.saveLoading = false\n            })\n          }\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style rel=\"stylesheet/scss\" lang=\"scss\">\n.avatar {\n  width: 120px;\n  height: 120px;\n  border-radius: 50%;\n}\n.user-info {\n  padding-left: 0;\n  list-style: none;\n  li {\n    border-bottom: 1px solid #f0f3f4;\n    padding: 11px 0;\n    font-size: 13px;\n  }\n  .user-right {\n    width: 250px;\n    float: right;\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    text-align: right;\n  }\n}\n</style>\n"]}]}