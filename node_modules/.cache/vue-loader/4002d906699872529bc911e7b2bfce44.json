{"remainingRequest":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mcsjourneys/Desktop/startup-frontend-main/src/views/register/index.vue?vue&type=style&index=2&id=022fc800&scoped=true&lang=css","dependencies":[{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/src/views/register/index.vue","mtime":1655109659000},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/css-loader/dist/cjs.js","mtime":1715598878831},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1715598879821},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/postcss-loader/src/index.js","mtime":1715598882466},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/cache-loader/dist/cjs.js","mtime":1715598879413},{"path":"/Users/mcsjourneys/Desktop/startup-frontend-main/node_modules/vue-loader/lib/index.js","mtime":1715598879453}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi8qIOS/ruaUuemqjOivgeWZqOagt+W8jyAqLwo6OnYtZGVlcCAuZWwtZm9ybS1pdGVtLmlzLWVycm9yIC5lbC1pbnB1dF9faW5uZXIgewogIGJvcmRlci1jb2xvcjogIzg4OWFhNDsKfQo6OnYtZGVlcCAuZWwtZm9ybS1pdGVtLmlzLWVycm9yIC5lbC1pbnB1dF9fdmFsaWRhdGVJY29uIHsKICBjb2xvcjogIzg4OWFhNDsKfQo6OnYtZGVlcCAuZWwtZm9ybS1pdGVtX19lcnJvciB7CiAgY29sb3I6ICNlNmEyM2M7Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+TA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/register","sourcesContent":["<template>\n  <div class=\"register-container\">\n    <article class=\"header\">\n      <header>\n        <el-avatar icon=\"el-icon-user-solid\" shape=\"circle\" />\n        <span class=\"login\">\n          <em class=\"bold\">已有账号？</em>\n          <a href=\"/login\">\n            <el-button type=\"primary\" size=\"mini\">登录</el-button>\n          </a>\n        </span>\n      </header>\n    </article>\n    <section>\n      <el-form\n        ref=\"ruleForm\"\n        :model=\"ruleForm\"\n        :rules=\"rules\"\n        label-width=\"100px\"\n        autocomplete=\"off\"\n        :hide-required-asterisk=\"true\"\n        size=\"medium\"\n      >\n        <div style=\"padding-top: 10px\">\n          <el-form-item label=\"邮箱\" prop=\"email\">\n            <el-col :span=\"10\">\n              <el-input\n                v-model=\"ruleForm.email\"\n                placeholder=\"输入邮箱并点击发送验证码\"\n              />\n            </el-col>\n            <el-button\n              :loading=\"codeLoading\"\n              :disabled=\"isDisable\"\n              size=\"small\"\n              round\n              @click=\"sendMsg\"\n            >发送验证码</el-button>\n\n            <span class=\"status\">{{ statusMsg }}</span>\n          </el-form-item>\n          <el-form-item label=\"验证码\" prop=\"code\">\n            <el-col :span=\"10\">\n              <el-input\n                v-model=\"ruleForm.code\"\n                maxlength=\"6\"\n                placeholder=\"请登录邮箱接收验证码\"\n              />\n            </el-col>\n          </el-form-item>\n          <el-form-item label=\"密码\" prop=\"pwd\">\n            <el-col :span=\"10\">\n              <el-input v-model=\"ruleForm.pwd\" type=\"password\" />\n            </el-col>\n          </el-form-item>\n          <el-form-item label=\"确认密码\" prop=\"cpwd\">\n            <el-col :span=\"10\">\n              <el-input v-model=\"ruleForm.cpwd\" type=\"password\" />\n            </el-col>\n          </el-form-item>\n          <el-form-item>\n            <el-button\n              type=\"primary\"\n              style=\"width: 40%\"\n              @click=\"register\"\n            >注册</el-button>\n          </el-form-item>\n        </div>\n      </el-form>\n    </section>\n\n    <div class=\"error\">{{ error }}</div>\n  </div>\n</template>\n\n<script>\nimport { getEmailCode, register } from '@/api/register'\nimport { encrypt } from '@/utils/rsaEncrypt'\nexport default {\n  name: 'Register',\n  data() {\n    return {\n      statusMsg: '',\n      error: '',\n      isDisable: false,\n      codeLoading: false,\n      ruleForm: {\n        email: '',\n        code: '',\n        pwd: '',\n        cpwd: ''\n      },\n      rules: {\n        email: [{\n          required: true,\n          type: 'email',\n          message: '请输入邮箱',\n          trigger: 'blur'\n        }],\n        code: [{\n          required: true,\n          type: 'string',\n          message: '请输入验证码',\n          trigger: 'blur'\n        }],\n        pwd: [{\n          required: true,\n          message: '创建密码',\n          trigger: 'blur'\n        }, { pattern: /^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,20}$/, message: '密码必须同时包含数字与字母,且长度为 8-20位' }],\n        cpwd: [{\n          required: true,\n          message: '确认密码',\n          trigger: 'blur'\n        }, {\n          validator: (rule, value, callback) => {\n            if (value === '') {\n              callback(new Error('请再次输入密码'))\n            } else if (value !== this.ruleForm.pwd) {\n              callback(new Error('两次输入密码不一致'))\n            } else {\n              callback()\n            }\n          },\n          trigger: 'blur'\n        }]\n\n      }\n    }\n  },\n  methods: {\n    sendMsg: function() {\n      const self = this\n      let emailPass\n      let timerid\n      if (timerid) {\n        return false\n      }\n      self.statusMsg = ''\n      this.$refs['ruleForm'].validateField('email', (valid) => {\n        emailPass = valid\n      })\n      // 向后台API验证码发送\n      if (!emailPass) {\n        self.codeLoading = true\n        self.statusMsg = '验证码发送中...'\n        getEmailCode(self.ruleForm.email).then(res => {\n          this.$message({\n            showClose: true,\n            message: '发送成功，验证码有效期5分钟',\n            type: 'success'\n          })\n          let count = 60\n          self.ruleForm.code = ''\n          self.codeLoading = false\n          self.isDisable = true\n          self.statusMsg = `验证码已发送,${count--}秒后重新发送`\n          timerid = window.setInterval(function() {\n            self.statusMsg = `验证码已发送,${count--}秒后重新发送`\n            if (count <= 0) {\n              window.clearInterval(timerid)\n              self.isDisable = false\n              self.statusMsg = ''\n            }\n          }, 1000)\n        }).catch(err => {\n          console.log(err.response)\n          this.isDisable = false\n          this.statusMsg = ''\n          this.codeLoading = false\n          console.log(err.response.data.message)\n        })\n      }\n    },\n\n    // 用户注册\n    register: function() {\n      this.$refs['ruleForm'].validate((valid) => {\n        if (valid) {\n          const user = {\n            code: this.ruleForm.code,\n            email: this.ruleForm.email,\n            password: encrypt(this.ruleForm.pwd)\n          }\n          register(user).then(res => {\n            console.log(res)\n            this.$message({\n              showClose: true,\n              message: '注册成功，正在跳转到登录界面...',\n              type: 'success'\n            })\n            setTimeout(() => {\n              this.$router.push('/')\n            }, 2000)\n          }).catch(err => {\n            console.log(err.response.data.message)\n          })\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n/* 修复input 背景不协调 和光标变色 */\n/* Detail see https://github.com/PanJiaChen/vue-element-admin/pull/927 */\n\n$bg: #283443;\n$light_gray: #fff;\n$cursor: #fff;\n\n@supports (-webkit-mask: none) and (not (cater-color: $cursor)) {\n  .register-container .el-input input {\n    color: $cursor;\n  }\n}\n\n/* reset element-ui css */\n.register-container {\n  .el-input {\n    display: inline-block;\n    height: 47px;\n    width: 95%;\n\n    input {\n      background: rgba(0, 0, 0, 0.1);\n      border-radius: 5px;\n      border: 1px solid rgba(255, 255, 255, 0.1);\n      -webkit-appearance: none;\n      padding: 12px 5px 12px 15px;\n      color: $light_gray;\n      height: 47px;\n      caret-color: $cursor;\n\n      &:-webkit-autofill {\n        box-shadow: 0 0 0px 1000px $bg inset !important;\n        -webkit-text-fill-color: $cursor !important;\n      }\n    }\n  }\n\n  .el-form-item {\n    label {\n      font-style: normal;\n      font-size: 12px;\n      color: $light_gray;\n    }\n  }\n}\n</style>\n\n<style lang=\"scss\" scoped>\n$bg: #2d3a4b;\n$dark_gray: #889aa4;\n$light_gray: #eee;\n\n.register-container {\n  min-height: 100%;\n  width: 100%;\n  background-color: $bg;\n  overflow: hidden;\n\n  .header {\n    border-bottom: 2px solid rgb(235, 232, 232);\n    min-width: 980px;\n    color: #666;\n\n    header {\n      margin: 0 auto;\n      padding: 10px 0;\n      width: 980px;\n\n      .login {\n        float: right;\n      }\n\n      .bold {\n        font-style: normal;\n        color: $light_gray;\n      }\n    }\n  }\n\n  > section {\n    margin: 0 auto 30px;\n    padding-top: 30px;\n    width: 980px;\n    min-height: 300px;\n    padding-right: 100px;\n    box-sizing: border-box;\n\n    .status {\n      font-size: 12px;\n      margin-left: 20px;\n      color: #e6a23c;\n    }\n\n    .error {\n      color: red;\n    }\n  }\n\n  .tips {\n    float: right;\n    font-size: 14px;\n    color: #fff;\n    margin-bottom: 10px;\n\n    span {\n      &:first-of-type {\n        margin-right: 16px;\n      }\n    }\n  }\n}\n</style>\n\n<style scoped>\n/* 修改验证器样式 */\n::v-deep .el-form-item.is-error .el-input__inner {\n  border-color: #889aa4;\n}\n::v-deep .el-form-item.is-error .el-input__validateIcon {\n  color: #889aa4;\n}\n::v-deep .el-form-item__error {\n  color: #e6a23c;\n}\n</style>\n"]}]}